<!-- Generated by SpecStory -->

# Managing Shot Plans for Token Efficiency (2025-04-08 20:20:40)

_**User**_

I am going to split out the shot plan into an array of shots like the attachment. This will help mitigate token limit problems since I will only keep the last 8 shots in memory. Do you understand?

---

_**Assistant**_

I understand completely. Creating a split shot plan array will help you manage token limits efficiently by keeping only the most recent 8 shots in memory at any given time. This approach is practical when working with larger shot plans like the one in the attached file.

The current shot plan in `test-data/shots.json` contains 30 shots across 10 scenes, and splitting it into smaller chunks will make it more manageable. When you need to process shots, you can work with these smaller arrays sequentially rather than trying to process the entire plan at once.

---

_**User**_

Right. Now I may need to adjust the Broll ideation agent to reflect this. Can you analyze and determine which changes are required? Report the changes first and let me review them before p[roceediong with any changes.

---

_**Assistant**_

After analyzing the B-RollIdeation.md file and the shot plan structure, here are the changes required to adjust the B-Roll Ideation Agent to work with a split shot plan:

1. **Modify Input Format Description**: Update section 2 "Workflow Position & Input/Output Format" to specify that the agent will receive a partial shot plan containing only a subset of shots (up to 8) rather than the complete plan.

2. **Update Processing Guidelines**: Add instructions in section 4 to handle the partial shot plans by:
   - Processing only the B-Roll shots present in the current subset
   - Maintaining consistent creative approaches regardless of which subset is being processed

3. **Add Batch Processing Instructions**: Include guidance for handling sequential batches of shots by:
   - Focusing only on shots in the current batch
   - Not requiring context from previous or future batches

4. **Update Processing Example**: Modify section 8.1 to show an example with a smaller subset of shots to reflect the new batch processing approach.

5. **Add Continuity Note**: Include a note in section 9 "Additional Tips" about maintaining creative consistency across different batches of shots.

Would you like me to proceed with implementing any of these changes to the B-RollIdeation.md file?

---

_**User**_

I think there is a point of confusion. You keep referring to batches, by the shots are to be fed one at a time. They agent will have memory of the last 8 shots so that it does have context of past shots but you said it should operate without context which is incorrect.

---

_**Assistant**_

You're right, I misunderstood. Let me clarify the actual changes needed:

1. **Modify Input Format Description**: Update section 2 to specify that the agent will receive individual B-Roll shots one at a time, not batches.

2. **Update Context Handling**: Add instructions explaining that the agent:
   - Will have memory of the last 8 processed shots
   - Should use this context to maintain narrative coherence
   - Will process each new shot within the context of those previously processed

3. **Sequential Processing**: Clarify that the agent processes shots sequentially in order, building on previous creative decisions.

4. **Update Processing Example**: Modify section 8.1 to show an example of processing a single shot while considering previous context.

5. **Add Continuity Guidelines**: Include specific guidance in section 9 about how to maintain creative consistency by referencing previously processed shots in memory.

This approach recognizes that the agent has limited but important context (the last 8 shots) that should inform creative decisions for each new shot.

---

_**User**_

OK that is better!

---

_**Assistant**_

Great! Would you like me to implement these changes to the B-RollIdeation.md file now?

---

_**User**_

Yes

---

_**Assistant**_

I'll implement the changes to B-RollIdeation.md now.

---

```diff
  ## 2. Workflow Position & Input/Output Format
  
- You receive a Shot Plan containing shots marked as roll_type "B" and produce creative concepts for these B-Roll shots.
+ You receive individual shots from a Shot Plan, one at a time, focusing on shots marked as roll_type "B". You will produce creative concepts for each B-Roll shot while maintaining narrative coherence with previously processed shots.
  
  ### Input Format
  
- The input is a Shot Plan with properties including:
+ The input is a single shot from the Shot Plan with properties including:
  
  - scene_id, shot_id
  - emotional_tone
  - suggested_broll_visuals
+ 
+ You will have memory of up to 8 previously processed shots to provide context and maintain narrative coherence.
  
  ### Output Format
  
- The output is a structured JSON with creative concepts for each B-Roll shot:
+ The output is a structured JSON with creative concepts for the current B-Roll shot:
  
  - scene_id and shot_id (preserved from the input)
  When creating B-Roll concepts:
  
- 1. Filter the Shot Plan to identify shots classified as "B" roll_type
- 2. For each B-Roll shot, create three distinct visual concepts:
+ 1. Ensure the shot is classified as "B" roll_type before processing
+ 2. Reference your memory of up to 8 previously processed shots to maintain thematic and stylistic consistency
+ 3. For each B-Roll shot, create three distinct visual concepts:
     - **Standard B-Roll**: Conventional, straightforward visual representation
     - **Enhanced B-Roll**: More creative interpretation with current visual trends
     - **Experimental/Viral B-Roll**: Highly innovative concept that pushes creative boundaries while optimizing for audience engagement and shareability
- 3. Ensure each concept includes:
+ 4. Ensure each concept includes:
     - Clear idea description
     - Visual style specification
     - Motion/animation suggestion
- 4. Maintain narrative coherence across all concept tiers
- 5. Reference the emotional_tone from the Shot Plan for tonal consistency
- 6. Consider the expected_duration to ensure concepts are feasible
- 7. Use the suggested_broll_visuals from the Shot Plan as a starting point for ideation, then expand creatively
- 8. Pay attention to the shot_notes and shot_description for context about the shot's purpose and narrative function
- 9. Always consider audience connection when developing concepts, particularly for the Experimental/Viral tier
+ 5. Maintain narrative coherence with previously processed shots
+ 6. Reference the emotional_tone from the Shot Plan for tonal consistency
+ 7. Consider the expected_duration to ensure concepts are feasible
+ 8. Use the suggested_broll_visuals from the Shot Plan as a starting point for ideation, then expand creatively
+ 9. Pay attention to the shot_notes and shot_description for context about the shot's purpose and narrative function
+ 10. Always consider audience connection when developing concepts, particularly for the Experimental/Viral tier
  
  ## 5. Output Document Generation
  
- Generate a B-Roll Concepts document following this exact structure for each B-Roll shot:
+ Generate a B-Roll Concepts document following this exact structure for the current B-Roll shot:
  
  ```json
        }
      }
-     // Additional shot concepts follow the same structure
    ]
  }
  ## 8. Processing Example
  
- ### 8.1 Input Shot Plan Example (Multiple Shots)
+ ### 8.1 Input Shot Example (Single Shot)
  
  ```json
- [
  {
    "scene_id": "scene_03",
    "emotional_tone": "sophisticated, impressive",
    "shot_notes": "This establishing shot should convey the scale and sophistication of AI technology in a visually compelling way."
-   },
-   {
-     "scene_id": "scene_03",
-     "shot_id": "scene_03_shot_2",
-     "shot_number": 2,
-     "shot_title": "Data Processing Visualization",
-     "shot_description": "Visual representation of data moving through the AI processing pipeline",
-     "roll_type": "B",
-     "narration_text": "Our AI system processes millions of data points to identify patterns.",
-     "word_count": 10,
-     "expected_duration": 4,
-     "suggested_broll_visuals": "Data visualization, flowing information, digital processing",
-     "suggested_sound_effects": ["digital processing", "data flow"],
-     "emotional_tone": "technical yet accessible",
-     "shot_notes": "This shot should convey complex technology in an approachable way. The goal is to visualize abstract data processing in a way that feels tangible and impressive."
-   }
- ]
+ }
  ```
  
          "motion": "Swooping camera movement starting high above the 'city' then dramatically diving down to reveal intricate details. Pulse effects ripple through the structures showing system activity, creating a mesmerizing visual rhythm optimized for engagement."
        }
-     },
-     {
-       "scene_id": "scene_03",
-       "shot_id": "scene_03_shot_2",
-       "standard_broll": {
-         "idea": "Clean, modern visualization of data represented as glowing particles flowing through a transparent pipeline/tunnel structure, clearly showing input and processed output",
-         "visual_style": "Minimalist, tech aesthetic with blue and white scheme. Clean lines, high-contrast elements against dark background for clarity. Sharp focus throughout.",
-         "motion": "Steady flow of particle streams moving left to right through the pipeline, with occasional pulses to show processing nodes. Gentle camera pan following the data flow."
-       },
-       "enhanced_broll": {
-         "idea": "Data visualized as colorful energy streams weaving through a semi-abstract neural network structure that morphs to reveal pattern recognition in action",
-         "visual_style": "Gradient scheme transitioning from cool blues (raw data) to warm oranges (processed insights). Depth-of-field effects creating foreground/background interest. Stylized tech-organic aesthetic.",
-         "motion": "Dynamic flow with variable speeds showing acceleration at processing nodes. Camera slowly orbits the structure revealing different perspectives. Subtle lens flares as patterns emerge."
-       },
-       "experimental_broll": {
-         "idea": "Abstract data ecosystem portrayed as a living digital garden where information appears as luminescent plants/flowers that transform as they absorb data, with patterns emerging as blooming structures - designed to evoke wonder and be highly shareable",
-         "visual_style": "Surreal blend of natural and technological elements. Unexpected palette with bioluminescent quality. Microscopic to macroscopic scale shifts. Dreamlike quality with sharp details in focus points. Visually striking composition optimized for social sharing.",
-         "motion": "Organic, breathing motion throughout the scene. Surprising growth spurts as insights form. Camera moves from immersive close-ups to revealing wide shots through a fluid, continuous movement. Includes a dramatic reveal moment for maximum emotional impact."
-       }
      }
    ]
  ## 9. Additional Tips
  
- 1. **Consider Visual Context**: Try to conceptualize how shots will flow together even though you're working with individual shots
+ 1. **Consider Visual Context**: Reference previously processed shots to ensure visual consistency and narrative flow
  2. **Progressive Innovation**: Each tier should be noticeably more creative than the previous one
  3. **Practical Constraints**: Remember that concepts need to be feasible for image generation and animation
  4. **Emotional Alignment**: Ensure the visual mood aligns with the intended emotional tone
  5. **Audience Connection**: Prioritize concepts that establish direct emotional connection with viewers
- 6. **Variety of Approaches**: Across different shots, try to utilize a variety of visual techniques and styles
+ 6. **Variety of Approaches**: Use a variety of visual techniques and styles while maintaining coherence with previous shots
  7. **Narrative Relevance**: Even experimental/viral concepts must serve the narrative purpose of the shot
  8. **Shareability Factors**: For experimental/viral tier, emphasize elements that drive audience engagement and sharing
+ 9. **Continuity Awareness**: Refer to your memory of previously processed shots to maintain thematic, stylistic, and narrative continuity
+ 10. **Sequential Development**: Build upon creative decisions made for earlier shots to create a cohesive visual experience
  
  
```

---

I've updated the B-RollIdeation.md file to reflect the sequential processing of shots with memory of the last 8 shots. The key changes include:

1. Modified the input format to specify receiving a single shot at a time
2. Added context about having memory of up to 8 previously processed shots 
3. Updated processing guidelines to emphasize referencing previous shots
4. Changed the example to show processing of a single shot
5. Added specific tips about continuity and sequential development

The agent now clearly understands it should:
- Process one B-Roll shot at a time
- Maintain awareness of up to 8 previously processed shots
- Create concepts that are consistent with earlier shots
- Build a cohesive visual experience across the entire video

These changes will help the agent maintain narrative coherence while working with shots sequentially rather than processing the entire shot plan at once.

---



---

