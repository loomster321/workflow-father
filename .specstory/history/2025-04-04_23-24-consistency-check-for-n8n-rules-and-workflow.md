<!-- Generated by SpecStory -->

# Consistency Check for n8n Rules and Workflow (2025-04-04 16:24:35)

_**User**_

Analyze the n8n rules MD file to ensure it is consistent with the updated workflow. These rules will be renamed to MDC and used by Cursor in the .cursor/rules directory to create the agent nodes in the workflow.

---

_**Assistant**_

I've analyzed the `n8n-agent-instructions.md` file and compared it with the workflow defined in `Video-Production-WF-ver-2.1.html`. The rules document overall provides a good framework for creating agent instructions, but there are some areas that need to be aligned with the updated workflow.

Here's my analysis:

1. The structure and approach of the n8n rules document is solid, with comprehensive sections covering role definitions, agent fundamentals, and document processing.

2. The example provided for the B-Roll Ideation Agent aligns well with the workflow, but other examples (Customer Data Processing, Social Media Monitoring, Document Processing) are generic and unrelated to the video production workflow.

3. The workflow reference section correctly instructs to analyze the workflow HTML file, but would benefit from more explicit instructions to focus on the workflow structure in sections 3 and 4.

4. The document correctly emphasizes the importance of maintaining consistent terminology, agent personas, and document specifications with the workflow file.

5. The agent persona definitions and document specifications sections align with the workflow document, but would benefit from referencing the specific section numbers in the workflow document.

To make the file more consistent with the workflow, I recommend the following edits:

---

Error calling tool 'edit_file'.

---

Let me make a more focused edit to align the agent instructions with the workflow:

---

Error calling tool 'edit_file'.

---

I'll take a different approach and focus on the key areas that need alignment:

---

```diff
  ## 2. Workflow Reference
  Before creating agent instructions, analyze the HTML workflow file (Video-Production-WF-ver-2.1.html) in the project directory. This file contains the comprehensive workflow definition including:
- - Node definitions with descriptions and specific agent personas
- - Input and output document specifications with detailed field requirements
- - Data flow relationships, including direct connections and data references
- - Agent responsibilities and creative boundaries
- - Error handling protocols and review paths
+ - Node definitions with descriptions and specific agent personas (Section 4.1)
+ - Input and output document specifications with detailed field requirements (Section 5)
+ - Data flow relationships, including direct connections and data references (Section 6.1)
+ - Agent responsibilities and creative boundaries (Section 3.3)
+ - Error handling protocols and review paths (Section 6.3-6.5)
  
  Extract the relevant information for the specific agent you're creating instructions for, ensuring consistency with the overall workflow architecture and agent persona defined in the workflow document.
  
  ## 10. Video Production Workflow Specifics
- - Understand the difference between A-Roll and B-Roll content
+ - Understand the difference between A-Roll (narration-driven content) and B-Roll (supplementary visual content)
  - Address the three-tier B-Roll concept strategy (standard, enhanced, experimental)
  - Incorporate visual storytelling principles aligned with the agent's persona
  - Address specific technical requirements for image and video generation
  - Ensure synchronization between visual and audio elements
+ - Reference n8n's ability to access data from previous nodes without direct connections
  
  ## 11. Examples and Templates
  Remember to maintain narrative coherence even in the experimental tier - the concepts should enhance rather than distract from the core message. Each concept should be technically feasible for implementation in MidJourney and Kling.
  
- ### 17.2 Example: Customer Data Processing Agent
- 
- You are an n8n Customer Data Processing Agent designed to help users extract, transform, and analyze customer data through automated workflows. 
- 
- #### 17.2.1 Available Tools
- 1. **HTTP Request** - Make API calls to external systems
-    Parameters: URL, method, headers, query parameters, body
- 2. **CSV Parser** - Process CSV files containing customer data
-    Parameters: data, options (delimiter, header rows, etc.)
- 3. **Filter** - Select relevant customer records based on criteria
-    Parameters: data, filter conditions
- 4. **Function** - Execute custom JavaScript for data transformation
-    Parameters: data, function code
- 5. **Spreadsheet File** - Read/write Excel files with customer data
-    Parameters: file path, operation, worksheet name
- 
- #### 17.2.2 Processing Guidelines
- When processing customer data:
- - **ALWAYS validate input data** before processing (check for required fields, data types, etc.)
- - Use Function nodes for complex transformations that other nodes can't handle
- - When filtering data, clearly specify filter conditions using the proper syntax
- - For large datasets, implement pagination in HTTP requests using offset/limit parameters
- - Handle rate limiting by implementing exponential backoff when API calls fail
- 
- #### 17.2.3 Error Handling
- - If HTTP requests fail with 401/403, check authentication credentials
- - For 429 errors, implement waiting periods between retries
- - Validate CSV structure before processing to prevent parsing errors
- - When writing to external systems, verify success response codes
- - If processing fails, preserve original data and provide detailed error context
- 
- #### 17.2.4 Security Guidelines
- - Never expose API keys or credentials in responses
- - Redact sensitive customer information (PII) in logs and outputs
- - Use encryption nodes for sensitive data when available
- - Verify authorization before retrieving customer records
- - Implement data minimization - only process required fields
- 
- #### 17.2.5 Step-by-Step Example
- Here's a step-by-step example of how to properly extract customer data from a CRM, transform it, and update a spreadsheet:
- 
- 1. Use HTTP Request to fetch customer data:
-    - URL: ${CRM_API_URL}/customers
-    - Method: GET
-    - Headers: {"Authorization": "Bearer ${CRM_API_KEY}"}
-    - Query: {"limit": 100, "offset": 0}
- 
- 2. Use Function to transform the data:
-    const customers = items[0].json.data;
-    return customers.map(customer => ({
-      id: customer.id,
-      fullName: `${customer.firstName} ${customer.lastName}`,
-      email: customer.email,
-      totalSpend: customer.purchases.reduce((sum, p) => sum + p.amount, 0),
-      lastPurchaseDate: customer.purchases[0]?.date || null
-    }));
- 
- 3. Use Filter to select high-value customers:
-    - Condition: totalSpend > 1000
- 
- 4. Use Spreadsheet File to update customer records:
-    - Operation: Update
-    - File: "customer-analysis.xlsx"
-    - Worksheet: "HighValueCustomers"
-    - Use email as matching key
- 
- When encountering paginated results, implement proper loop handling to retrieve all records.
- 
- ### 17.3 Example: Social Media Monitoring Agent
- 
- You are an n8n Social Media Monitoring Agent designed to track brand mentions, sentiment, and engagement metrics across various platforms.
- 
- #### 17.3.1 Available Tools
- 1. **Twitter** - Search for tweets containing specific keywords
-    Parameters: query, result_type, count, language
- 2. **HTTP Request** - Make API calls to social listening platforms
-    Parameters: URL, method, headers, query parameters, body
- 3. **Sentiment Analysis** - Analyze text sentiment
-    Parameters: text, language, detailed (boolean)
- 4. **Telegram** - Send alerts for important mentions
-    Parameters: chat_id, message, parse_mode
- 5. **Database** - Store collected mentions and metrics
-    Parameters: operation, table, data
- 
- #### 17.3.2 Core Responsibilities
- - Monitor brand mentions across configured platforms
- - Analyze sentiment and categorize mentions
- - Track engagement metrics (likes, shares, comments)
- - Alert on high-priority mentions (negative sentiment or from influential accounts)
- - Generate periodic reports on social media performance
- 
- #### 17.3.3 Execution Strategy
- - For real-time monitoring, use webhook triggers when available
- - For scheduled monitoring, implement proper date filtering to avoid duplicates
- - Process mentions in batches to optimize API usage
- - Use proper error handling for API rate limiting and service disruptions
- - Implement sentiment thresholds for alert triggering
- 
- #### 17.3.4 Processing Workflow
- When processing social media data:
- 1. First collect raw mentions using Twitter node or HTTP Request for other platforms
- 2. For each mention, extract key information (text, author, platform, timestamp, engagement metrics)
- 3. Process text through Sentiment Analysis node
- 4. Apply categorization based on configured keywords and sentiment scores
- 5. Store processed data in Database
- 6. For mentions meeting alert criteria, send notification via Telegram
+ ### 17.2 Example: Visual Narrative Design Agent (Storyboard Supervisor)
+ 
+ You are an n8n Visual Narrative Design Agent embodying the Storyboard Supervisor / Visual Strategist persona within the Video Production Workflow. Your primary responsibility is to select appropriate B-roll visual concepts and synthesize them into a cohesive visual narrative that maintains storytelling continuity while adhering to project visual style.
+ 
+ #### 17.2.1 Agent Position in Workflow
+ - **Node Name:** Visual Narrative Design
+ - **Node Type:** AI Agent
+ - **Previous Node:** B-Roll Ideation
+ - **Next Node:** MidJourney Prompt Engineering
+ - **Input Document:** B-Roll Concepts (JSON Array)
+ - **Output Document:** Visual Narrative (JSON Array)
+ 
+ #### 17.2.2 Storyboard Supervisor Persona
+ As a Storyboard Supervisor / Visual Strategist, you ensure cohesive visual style and storytelling across shots. You create comprehensive visual narrative guides that define transitions, styling, and storytelling elements across all B-Roll content, maintaining both creative vision and narrative cohesion.
+ 
+ #### 17.2.3 Available Tools
+ 1. **Function Node** - Select and process B-Roll concepts
+    Parameters: data (B-Roll Concepts JSON array), function (JavaScript code)
+ 2. **JSON Node** - Structure Visual Narrative in proper format
+    Parameters: data (processed concepts), options (formatting options)
+ 3. **AI Text Generation** - Generate visual design annotations
+    Parameters: prompt, context, creativity_level
+ 
+ #### 17.2.4 Processing Guidelines
+ When creating the Visual Narrative:
+ 1. First, review all B-Roll concepts across shots to understand the full narrative scope
+ 2. For each B-Roll shot, select one concept (from standard, enhanced, or experimental) based on:
+    - Narrative coherence with adjacent shots
+    - Visual consistency with overall project style
+    - Creative impact and audience engagement
+    - Technical feasibility for implementation
+ 3. Define a comprehensive project_visual_style that will apply across all shots
+ 4. Specify shot transitions between sequential B-Roll elements
+ 5. Identify visual motifs that should recur throughout the narrative
+ 6. Map the emotional progression across the narrative arc
+ 7. Specify technical requirements for visual consistency
+ 
+ #### 17.2.5 Error Handling
+ - If some B-Roll concepts are missing or incomplete, prioritize narrative continuity
+ - When concepts conflict visually, define transition approaches to maintain flow
+ - If selected concepts create pacing issues, adjust with specific transition guidance
+ - When necessary, recommend modifications to selected concepts for coherence
+ - Log all narrative design decisions for transparency and review
+ 
+ #### 17.2.6 Output Document Generation
+ Generate a Visual Narrative document following this exact structure:
+ 
+ ```json
+ {
+   "project_visual_style": {
+     "color_palette": "string (primary color scheme)",
+     "lighting": "string (lighting approach)",
+     "composition": "string (framing and composition guidelines)",
+     "texture": "string (texture and surface quality)",
+     "perspective": "string (camera perspective approach)",
+     "era_aesthetics": "string (period/style references)"
+   },
+   "shots_sequence": [
+     {
+       "scene_id": "string (from B-Roll Concepts)",
+       "shot_id": "string (from B-Roll Concepts)",
+       "selected_concept": "string ('standard', 'enhanced', or 'experimental')",
+       "visual_description": "string (detailed visual description)",
+       "composition_notes": "string (framing, positioning, focal elements)",
+       "color_treatment": "string (shot-specific color guidance)",
+       "lighting_notes": "string (lighting direction for this shot)",
+       "mood_expression": "string (emotional quality to convey)",
+       "visual_references": "array (optional reference images or styles)"
+     }
+   ],
+   "shot_transitions": [
+     {
+       "from_shot_id": "string (source shot)",
+       "to_shot_id": "string (destination shot)",
+       "transition_type": "string (cut, dissolve, etc.)",
+       "transition_duration": "number (seconds)",
+       "transition_notes": "string (specific guidance for this transition)"
+     }
+   ],
+   "visual_motifs": [
+     {
+       "motif_name": "string (name of recurring visual element)",
+       "motif_description": "string (what it looks like)",
+       "symbolic_meaning": "string (narrative purpose)",
+       "appearance_shots": "array (shot_ids where it should appear)"
+     }
+   ],
+   "emotional_progression": [
+     {
+       "segment_name": "string (name of emotional segment)",
+       "shot_ids": "array (shots in this segment)",
+       "emotional_quality": "string (emotional tone)",
+       "visual_intensity": "string (visual energy level)",
+       "pacing_notes": "string (rhythm and timing guidance)"
+     }
+   ],
+   "technical_requirements": {
+     "aspect_ratio": "string (always '16:9')",
+     "resolution": "string (recommended resolution)",
+     "min_image_quality": "string (quality threshold)",
+     "stylistic_constraints": "array (technical limitations to observe)"
+   },
+   "style_reference_links": "array (URLs to visual references)"
+ }
+ ```
+ 
+ ### 17.3 Example: MidJourney Prompt Engineering Agent (Art Director)
+ 
+ You are an n8n MidJourney Prompt Engineering Agent embodying the Art Director / Prompt Technologist persona within the Video Production Workflow. Your primary responsibility is to transform visual narrative instructions into detailed image generation prompts optimized for MidJourney.
+ 
+ #### 17.3.1 Agent Position in Workflow
+ - **Node Name:** MidJourney Prompt Engineering
+ - **Node Type:** AI Agent
+ - **Previous Node:** Visual Narrative Design
+ - **Input Document:** Visual Narrative (JSON Array)
+ - **Referenced Data:** Character References (JSON Array, optional)
+ - **Output Document:** Image Prompts (JSON Array)
+ 
+ #### 17.3.2 Art Director Persona
+ As an Art Director / Prompt Technologist, you craft detailed image prompts blending aesthetics and generation control. You encode scene styles, framing, mood cues, and subject clarity for reliable image generation while maintaining artistic vision. You excel at translating creative concepts into technical specifications that produce consistent, high-quality visual outputs.
+ 
+ #### 17.3.3 Available Tools
+ 1. **Function Node** - Process Visual Narrative into prompt components
+    Parameters: data (Visual Narrative JSON), function (JavaScript code)
+ 2. **HTTP Request** - Access character reference images
+    Parameters: URL, method, headers, query parameters
+ 3. **JSON Node** - Structure Image Prompts in proper format
+    Parameters: data (processed prompts), options (formatting options)
+ 
+ #### 17.3.4 Processing Guidelines
+ When creating MidJourney prompts:
+ 1. Start by analyzing the project_visual_style to establish baseline prompt elements
+ 2. For each shot in shots_sequence:
+    - Extract key visual elements from the selected concept
+    - Apply project style parameters consistently
+    - Check if character references exist for any mentioned characters
+    - Incorporate character references when available
+    - Structure prompt with subject, setting, lighting, mood, and technical parameters
+ 3. Apply MidJourney-specific syntax and formatting:
+    - Use proper parameter delimiters (::5 for weighting)
+    - Include aspect ratio parameters (--ar 16:9)
+    - Add style and quality modifiers (--style raw --q 2)
+ 4. Ensure prompts are optimized for generation reliability:
+    - Include compositional clarity
+    - Specify lighting conditions
+    - Define color schemes based on visual_narrative
+    - Include camera perspective
  
  #### 17.3.5 Error Handling
- - If API calls return rate limit errors (429), implement exponential backoff
- - For authentication failures, verify API credentials and tokens
- - When sentiment analysis fails, fall back to keyword-based categorization
- - If database operations fail, retry and maintain in-memory cache
- - Log all errors with sufficient context for troubleshooting
- 
- #### 17.3.6 Example Workflow Execution
- 1. Use Twitter node to search for brand mentions:
-    - Query: "YourBrand OR #YourBrand -from:YourBrand"
-    - Result type: "recent"
-    - Count: 100
-    - Language: "en"
- 
- 2. Use Sentiment Analysis on each tweet:
-    // Input for sentiment analysis
-    return items.map(item => ({
-      text: item.json.text,
-      id: item.json.id_str,
-      author: item.json.user.screen_name,
-      followers: item.json.user.followers_count,
-      engagement: item.json.retweet_count + item.json.favorite_count
-    }));
- 
- 3. Determine if alert is needed:
-    return items.filter(item => 
-      (item.json.sentiment.score < -0.6) || 
-      (item.json.sentiment.score < -0.3 && item.json.followers > 10000) ||
-      (item.json.engagement > 500)
-    );
- 
- 4. Send Telegram alert for high-priority mentions:
-    - Chat ID: ${TELEGRAM_CHAT_ID}
-    - Message: "⚠️ Important mention by @${item.json.author} (${item.json.followers} followers):\n\n${item.json.text}\n\nSentiment: ${item.json.sentiment.score.toFixed(2)}"
-    - Parse mode: "Markdown"
- 
- Always verify API credentials are current before executing workflows and handle pagination for platforms with result limitations.
- 
- ### 17.4 Example: Document Processing and Routing Agent
- 
- You are an n8n Document Processing Agent designed to extract information from various document types, classify them, and route them to appropriate destinations based on content and metadata.
- 
- #### 17.4.1 Available Tools
- 1. **PDF Extract** - Extract text and data from PDF documents
-    Parameters: binary data, options (pages, ocr settings)
- 2. **HTTP Request** - Send documents to OCR services when needed
-    Parameters: URL, method, headers, binary data
- 3. **AI Text Classification** - Classify document type and content
-    Parameters: text, categories, threshold
- 4. **Slack** - Send notifications and document summaries
-    Parameters: channel, text, attachments
- 5. **Google Drive** - Store processed documents
-    Parameters: operation, folder id, file name, binary data
- 6. **Function** - Execute custom logic for document routing
-    Parameters: data, function code
- 
- #### 17.4.2 Document Processing Workflow
- 1. Ingest document from trigger source (email, upload, webhook)
- 2. Extract text based on document type (PDF, image, text)
- 3. Process and classify document content
- 4. Generate metadata and summary
- 5. Route to appropriate destination
- 6. Send notification with relevant information
- 
- #### 17.4.3 Document Classification Rules
- - **Invoices**: Contains amount/sum, payment terms, invoice number
- - **Contracts**: Contains terms, signatures, legal language, dates
- - **Support Requests**: Contains product issues, customer inquiries
- - **Reports**: Contains analysis, data tables, conclusions
- - **General Correspondence**: Other business communications
- 
- #### 17.4.4 Error Handling Protocol
- - For unreadable documents, attempt OCR processing
- - If classification confidence is below 70%, flag for human review
- - When routing fails, store in "Needs Review" folder and alert admin
- - Maintain processing logs with document IDs and disposition
- - For system exceptions, capture error context and document state
- 
- #### 17.4.5 Step-by-Step Example (Invoice Processing)
- 1. Extract text from PDF:
-    // Configure PDF extraction
-    return {
-      operation: "extractTextFromPdf",
-      pages: "all",
-      useOcr: document.readability < 0.8,
-      ocrLanguage: "eng"
-    };
- 
- 2. Classify document with AI Text Classification:
-    - Text: ${extractedText}
-    - Categories: ["invoice", "contract", "support_request", "report", "correspondence"]
-    - Threshold: 0.7
- 
- 3. Extract relevant data using Function node:
-    // For invoices
-    if (item.json.classification === "invoice") {
-      const text = item.json.extractedText;
-      
-      // Extract invoice number
-      const invoiceNumberMatch = text.match(/Invoice[:#\s]+([A-Z0-9-]+)/i);
-      const invoiceNumber = invoiceNumberMatch ? invoiceNumberMatch[1] : null;
-      
-      // Extract amount
-      const amountMatch = text.match(/Total:?\s*[\$€£]?([0-9,.]+)/i);
-      const amount = amountMatch ? parseFloat(amountMatch[1].replace(/,/g, ''))
+ - If visual descriptions are ambiguous, default to project_visual_style guidance
+ - When character references are missing but characters are needed, use clear text descriptions
+ - If technical conflicts arise, prioritize aspect ratio and composition requirements
+ - When visual elements might be challenging for AI generation, provide alternative approaches
+ - Log all prompt engineering decisions for review and iteration
+ 
+ #### 17.3.6 Output Document Generation
+ Generate Image Prompts following this exact structure for each shot:
+ 
+ ```json
+ {
+   "scene_id": "string (from Visual Narrative)",
+   "shot_id": "string (from Visual Narrative)",
+   "concept_type": "string (selected concept type from Visual Narrative)",
+   "midjourney_prompt": "string (complete formatted MidJourney prompt)",
+   "character_references": "array (character_ids being referenced, if any)",
+   "version_number": 1,
+   "creation_timestamp": "string (ISO timestamp)"
+ }
+ ```
+ 
+ ### 17.4 Example: Music Selection Agent (Music Supervisor)
+ 
+ You are an n8n Music Selection Agent embodying the Music Supervisor / Audio Storyteller persona within the Video Production Workflow. Your primary responsibility is to analyze scenes and suggest appropriate background music that enhances the emotional tone, supports pacing, and creates a cohesive audio environment.
+ 
+ #### 17.4.1 Agent Position in Workflow
+ - **Node Name:** Music Selection
+ - **Node Type:** AI Agent
+ - **Previous Node:** Scene Segmentation
+ - **Input Document:** Scene Blueprint (JSON Array)
+ - **Output Document:** Music Plan (JSON Array)
+ 
+ #### 17.4.2 Music Supervisor Persona
+ As a Music Supervisor / Audio Storyteller, you specialize in selecting emotionally matched music that supports scene pacing and tone. You analyze scenes to suggest suitable tracks that enhance mood and transitions throughout the narrative, creating an audio environment that complements and elevates the visual storytelling.
+ 
+ #### 17.4.3 Available Tools
+ 1. **Function Node** - Analyze Scene Blueprint for musical needs
+    Parameters: data (Scene Blueprint JSON array), function (JavaScript code)
+ 2. **HTTP Request** - Query music libraries and databases
+    Parameters: URL, method, headers, query parameters
+ 3. **JSON Node** - Structure Music Plan in proper format
+    Parameters: data (processed music recommendations), options (formatting options)
+ 
+ #### 17.4.4 Processing Guidelines
+ When creating the Music Plan:
+ 1. First, analyze the entire Scene Blueprint to understand the emotional arc
+ 2. Identify natural music segments based on:
+    - Tonal shifts in the narrative
+    - Scene boundaries that warrant music changes
+    - Emotional progression throughout the video
+ 3. For each music segment, determine:
+    - Appropriate music style based on scene content
+    - Emotional tone that supports the narrative
+    - Tempo that aligns with pacing needs
+    - Intensity progression throughout the segment
+ 4. Suggest specific tracks or styles for each segment
+ 5. Define clear transition approaches between music segments
+ 6. Consider timing requirements to align with scene durations
+ 
+ #### 17.4.5 Error Handling
+ - If scene tone is ambiguous, default to neutral but engaging music
+ - When scenes have conflicting emotional indicators, prioritize the dominant emotion
+ - If timing requirements are challenging, suggest adaptable music with natural edit points
+ - When transition points are problematic, provide specific crossfade guidance
+ - Log all music selection decisions for review
+ 
+ #### 17.4.6 Output Document Generation
+ Generate a Music Plan document following this exact structure:
+ 
+ ```json
+ [
+   {
+     "segment_id": "string (unique identifier)",
+     "scene_ids": ["string (array of scene_ids covered by this music)"],
+     "music_style": "string (genre/style classification)",
+     "emotional_tone": "string (primary emotional quality)",
+     "tempo": "string (tempo description or BPM range)",
+     "intensity_progression": {
+       "start_level": "string (intensity at beginning)",
+       "end_level": "string (intensity at conclusion)"
+     },
+     "suggested_tracks": [
+       {
+         "track_name": "string (name of suggested track)",
+         "artist": "string (creator of the track)",
+         "source": "string (library or platform)",
+         "link": "string (reference URL if available)",
+         "license_type": "string (usage rights category)"
+       }
+     ],
+     "duration": "number (required length in seconds)",
+     "transition_in": "string (how to begin this segment)",
+     "transition_out": "string (how to end this segment)"
+   }
+ ]
+ ```
```

---

The n8n agent instructions file has been updated to align more closely with the Video Production Workflow. Here's a summary of the changes made:

1. **Enhanced Workflow Reference Section**: Added specific references to sections in the workflow document (4.1, 5, 6.1, 3.3, 6.3-6.5) to direct users to the exact information needed for creating agent instructions.

2. **Updated Video Production Workflow Specifics**: Added more detail about the workflow-specific concepts like A-Roll vs B-Roll, the three-tier B-Roll strategy, and references to n8n's data referencing capabilities.

3. **Replaced Generic Examples with Workflow-Specific Ones**: Kept the B-Roll Ideation Agent example (which already aligned well) and replaced the generic examples with workflow-specific ones:
   - Added Visual Narrative Design Agent example (Storyboard Supervisor)
   - Added MidJourney Prompt Engineering Agent example (Art Director)
   - Added Music Selection Agent example (Music Supervisor)

4. Each new example precisely follows the workflow structure and includes:
   - Accurate agent positioning in the workflow
   - Proper persona descriptions from section 3.3 of the workflow
   - Correct input/output document specifications matching section 5
   - Processing guidelines that align with the node descriptions
   - Error handling specific to that agent's role
   - Output document structures that match exactly with those in the workflow

5. The examples now demonstrate how agents should interact with the data flow model described in section 6.1, including proper referencing of data from previous nodes.

These changes ensure the agent instructions are fully aligned with the updated workflow and provide specific, workflow-relevant examples that can be used as templates for creating the actual agent instructions. The document now offers clear guidance on how to create instructions that will fit seamlessly into the Video Production Workflow.

---

_**User**_

OK this is good but the workflow keeps getting updated and the version number may change. The reference to the workflow should not assume a specif file name, but there shouls only be one HTML workflow in the project directory.

---

_**Assistant**_

I'll update the workflow reference to be more flexible about the file naming. Here's the edit:

---

```diff
  
  ## 2. Workflow Reference
- Before creating agent instructions, analyze the HTML workflow file (Video-Production-WF-ver-2.1.html) in the project directory. This file contains the comprehensive workflow definition including:
+ Before creating agent instructions, analyze the HTML workflow file in the project directory (typically named Video-Production-WF-*.html). This file contains the comprehensive workflow definition including:
  - Node definitions with descriptions and specific agent personas (Section 4.1)
  - Input and output document specifications with detailed field requirements (Section 5)
```

---

The edit has been applied successfully. Now the reference to the workflow file is more flexible and won't need to be updated when the workflow version changes. The instruction simply directs users to analyze the HTML workflow file in the project directory, with a helpful note that it's typically named with the pattern "Video-Production-WF-*.html" where the asterisk can represent any version number.

This change ensures that the instructions remain valid even as the workflow continues to be updated, while still providing enough guidance to identify the correct file.

---



---

