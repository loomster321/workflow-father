<!-- Generated by SpecStory -->

# MidJourney Prompt Engineering Agent Development (2025-04-05 09:24:42)

_**User**_

OK I would like you to draft the Midjouney prompt engineering agent considering the following references:

Video Production Workflow: Describes the agent, the data flow and it's relationship to the other nodes and agents.
Visual Narrative Agent: Describes the input agent which feeds input to this agent.
Midjourney photorealistic guide: Describes best practices for prompt engineering.
n8n Agent cursor rules: describes how to create the agent instructions.

Now following midjourney prompting best practices, create the agent, but before you do that, let me know if you have any questions or there are any ambiguities you would like resolved.

---

_**Assistant**_

I'll create a draft of the MidJourney Prompt Engineering agent based on the provided references. Let me first check if I have all the necessary information about this agent's role in the workflow.

---

<details>
            <summary>Searched codebase "MidJourney Prompt Engineering node role definition workflow" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ARCHIVE/Video-Production-WF-ver-2.0.html` | L332-358 |
| `ARCHIVE/Video-Production-WF-ver-1.5.html` | L332-358 |
| `archive/Video-Production-WF-ver-2.0.html` | L332-358 |
| `.cursor/rules/n8n-agent-instructions.mdc` | L459-500 |
| `archive/Video-Production-WF-ver-1.5.html` | L332-358 |
| `Video-Production-WF-ver-2.2.html` | L366-387 |
| `ARCHIVE/Video-Production-WF-simplified.html` | L272-301 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L357-378 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L366-387 |
| `archive/Video-Production-WF-simplified.html` | L272-301 |
| `ARCHIVE/Video-Production-WF-ver-2.1-older.html` | L355-376 |
| `archive/Video-Production-WF-ver-2.1.html` | L357-378 |
| `ARCHIVE/Video-Production-WF-ver-1.3.html` | L259-287 |
| `archive/Video-Production-WF-ver-2.2.html` | L366-387 |
| `ARCHIVE/Video-Production-WF-ver-1.4.html` | L268-295 |
| `archive/Video-Production-WF-ver-2.1-older.html` | L355-376 |
| `archive/Video-Production-WF-ver-1.3.html` | L259-287 |
| `Video-Production-WF-ver-2.2.html` | L387-404 |
| `archive/Video-Production-WF-ver-1.4.html` | L268-295 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L378-395 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L387-404 |
| `archive/Video-Production-WF-ver-2.1.html` | L378-395 |
| `ARCHIVE/Video-Production-WF-ver-2.1-older.html` | L376-393 |
| `archive/Video-Production-WF-ver-2.2.html` | L387-404 |
| `archive/Video-Production-WF-ver-2.1-older.html` | L376-393 |

</details>

---

Let me also check the output format to understand what this agent needs to produce:

---

<details>
            <summary>Searched codebase "Image Prompts document format structure MidJourney" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `ARCHIVE/Video-Production-WF-ver-1.4.html` | L627-677 |
| `archive/Video-Production-WF-ver-1.4.html` | L627-677 |
| `archive/Video-Production-WF-ver-2.0.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-2.0.html` | L736-771 |
| `archive/Video-Production-WF-ver-1.5.html` | L736-771 |
| `archive/Video-Production-WF-ver-2.2.html` | L791-828 |
| `ARCHIVE/Video-Production-WF-ver-1.5.html` | L736-771 |
| `archive/Video-Production-WF-ver-2.1.html` | L757-794 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L791-828 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L757-794 |
| `archive/Video-Production-WF-ver-2.1-older.html` | L755-792 |
| `Video-Production-WF-ver-2.2.html` | L792-838 |
| `ARCHIVE/Video-Production-WF-ver-2.1-older.html` | L755-792 |
| `archive/Video-Production-WF-simplified.html` | L615-679 |
| `ARCHIVE/Video-Production-WF-simplified.html` | L615-679 |
| `ARCHIVE/Video-Production-WF-ver-1.0.html` | L573-612 |
| `ARCHIVE/Video-Production-WF-ver-1.2.html` | L578-617 |
| `archive/Video-Production-WF-ver-1.0.html` | L573-612 |
| `ARCHIVE/Video-Production-WF-ver-1.3.html` | L618-668 |
| `archive/Video-Production-WF-ver-1.2.html` | L578-617 |
| `archive/Video-Production-WF-ver-1.3.html` | L618-668 |
| `Video-Production-WF-ver-2.2.html` | L838-890 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L828-880 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L794-846 |
| `references/midjourney_photorealistic_guide.md` | L1-101 |

</details>

---

Let me keep searching to find the specific fields in the Image Prompts document:

---

<details>
            <summary>Searched codebase "Image Prompts fields schema structure JSON fields" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `Video-Production-WF-ver-2.2.html` | L1211-1268 |
| `ARCHIVE/Video-Production-WF-ver-1.5.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-2.0.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L1167-1224 |
| `archive/Video-Production-WF-ver-1.5.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L1201-1258 |
| `ARCHIVE/Video-Production-WF-ver-1.4.html` | L791-836 |
| `archive/Video-Production-WF-ver-2.0.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-2.0.html` | L851-896 |
| `archive/Video-Production-WF-ver-1.4.html` | L791-836 |
| `archive/Video-Production-WF-ver-2.0.html` | L851-896 |
| `ARCHIVE/Video-Production-WF-ver-1.5.html` | L851-896 |
| `archive/Video-Production-WF-ver-1.5.html` | L851-896 |
| `archive/Video-Production-WF-ver-2.1.html` | L1167-1224 |
| `archive/Video-Production-WF-ver-2.2.html` | L1201-1258 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L757-794 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L791-828 |
| `ARCHIVE/Video-Production-WF-simplified.html` | L725-768 |
| `archive/Video-Production-WF-ver-2.1.html` | L757-794 |
| `archive/Video-Production-WF-ver-2.2.html` | L791-828 |
| `ARCHIVE/Video-Production-WF-ver-2.1-older.html` | L755-792 |
| `archive/Video-Production-WF-ver-2.1-older.html` | L755-792 |
| `archive/Video-Production-WF-simplified.html` | L725-768 |
| `ARCHIVE/Video-Production-WF-ver-2.1-older.html` | L876-923 |
| `ARCHIVE/Video-Production-WF-simplified.html` | L615-679 |

</details>

---

Let me try a more specific search to find the Image Prompts structure:

---

<details>
            <summary>Searched codebase "Image Prompts document fields midjourney_prompt" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `archive/Video-Production-WF-ver-2.2.html` | L791-828 |
| `archive/Video-Production-WF-ver-2.1.html` | L757-794 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L757-794 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L791-828 |
| `archive/Video-Production-WF-ver-2.1-older.html` | L755-792 |
| `archive/Video-Production-WF-simplified.html` | L615-679 |
| `ARCHIVE/Video-Production-WF-simplified.html` | L615-679 |
| `ARCHIVE/Video-Production-WF-ver-2.1-older.html` | L755-792 |
| `archive/Video-Production-WF-ver-2.0.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-2.0.html` | L736-771 |
| `archive/Video-Production-WF-ver-1.5.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-1.5.html` | L736-771 |
| `Video-Production-WF-ver-2.2.html` | L792-838 |
| `ARCHIVE/Video-Production-WF-ver-1.4.html` | L627-677 |
| `archive/Video-Production-WF-ver-1.4.html` | L627-677 |
| `ARCHIVE/Video-Production-WF-ver-1.0.html` | L573-612 |
| `ARCHIVE/Video-Production-WF-ver-1.2.html` | L578-617 |
| `archive/Video-Production-WF-ver-1.0.html` | L573-612 |
| `archive/Video-Production-WF-ver-1.2.html` | L578-617 |
| `references/midjourney_photorealistic_guide.md` | L1-101 |
| `ARCHIVE/Video-Production-WF-ver-1.3.html` | L618-668 |
| `ARCHIVE/Video-Production-WF-simplified.html` | L272-301 |
| `Video-Production-WF-ver-2.2.html` | L838-890 |
| `archive/Video-Production-WF-ver-1.3.html` | L618-668 |
| `Video-Production-WF-ver-2.2.html` | L366-387 |

</details>

---

Now I found the Image Prompts structure in the simplified document. Let me search for more details about the current version:

---

<details>
            <summary>Searched codebase "Video-Production-WF-ver-2.2 Image Prompts document fields" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `Video-Production-WF-ver-2.2.html` | L1211-1268 |
| `archive/Video-Production-WF-ver-1.4.html` | L791-836 |
| `ARCHIVE/Video-Production-WF-ver-1.4.html` | L791-836 |
| `ARCHIVE/Video-Production-WF-ver-2.2.html` | L1201-1258 |
| `archive/Video-Production-WF-ver-2.2.html` | L1201-1258 |
| `archive/Video-Production-WF-ver-2.0.html` | L851-896 |
| `ARCHIVE/Video-Production-WF-ver-2.1.html` | L1167-1224 |
| `ARCHIVE/Video-Production-WF-ver-2.0.html` | L851-896 |
| `archive/Video-Production-WF-ver-1.5.html` | L851-896 |
| `archive/Video-Production-WF-ver-2.1.html` | L1167-1224 |
| `ARCHIVE/Video-Production-WF-ver-1.5.html` | L851-896 |
| `ARCHIVE/Video-Production-WF-ver-2.1-older.html` | L876-923 |
| `archive/Video-Production-WF-ver-2.1-older.html` | L876-923 |
| `ARCHIVE/Video-Production-WF-simplified.html` | L725-768 |
| `archive/Video-Production-WF-simplified.html` | L725-768 |
| `archive/Video-Production-WF-ver-1.3.html` | L782-827 |
| `Video-Production-WF-ver-2.2.html` | L1268-1321 |
| `ARCHIVE/Video-Production-WF-ver-1.3.html` | L782-827 |
| `Video-Production-WF-ver-2.2.html` | L890-938 |
| `archive/Video-Production-WF-ver-2.0.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-2.0.html` | L736-771 |
| `archive/Video-Production-WF-ver-1.5.html` | L736-771 |
| `ARCHIVE/Video-Production-WF-ver-1.4.html` | L627-677 |
| `ARCHIVE/Video-Production-WF-ver-1.5.html` | L736-771 |
| `archive/Video-Production-WF-ver-1.4.html` | L627-677 |

</details>

---

I still need to find the exact fields for the Image Prompts document. Let me try another approach:

---

Read file: Video-Production-WF-ver-2.2.html

---

Now that I have all the information, I'll draft the MidJourney Prompt Engineering agent instructions based on the workflow documentation, the Visual Narrative agent, Midjourney photorealistic guide, and n8n Agent cursor rules.

# MidJourney Prompt Engineering Agent

## Role and Purpose

You are an n8n MidJourney Prompt Engineering Agent embodying the Art Director / Prompt Technologist persona within the Video Production Workflow. Your primary responsibility is to transform visual narrative instructions into detailed image generation prompts optimized for MidJourney, employing photorealistic techniques when appropriate. You encode scene styles, framing, mood cues, and subject clarity for reliable image generation while balancing visual artistry with technical precision.

## Position in Workflow

- **Node Name:** MidJourney Prompt Engineering
- **Node Type:** AI Agent
- **Previous Node:** Visual Narrative Design
- **Input Document:** Visual Narrative (JSON Array)
- **Referenced Data:** Character References (JSON Array, optional)
- **Output Document:** Image Prompts (JSON Array)
- **Next Node:** Image Generation

## Art Director / Prompt Technologist Persona

As an Art Director / Prompt Technologist, you craft detailed image prompts blending aesthetics and generation control. You excel at translating creative concepts into technical specifications that produce consistent, high-quality visual outputs. Your deep understanding of MidJourney's prompt syntax and behavior allows you to encode scene styles, framing, mood cues, and subject clarity in ways that generate reliable images while preserving artistic intent.

Your expertise includes:
- Translating visual concepts into precise technical specifications
- Structuring prompts to control compositional elements
- Implementing photorealistic techniques through prompt engineering
- Creating style consistency across multiple shots
- Balancing creative vision with technical constraints
- Incorporating character references seamlessly when available
- Applying photography terminology to enhance realism
- Managing prompt structure for optimal results

## Input/Output Format

### Input Format: Visual Narrative

The Visual Narrative document includes:
- `project_visual_style` (color_palette, lighting, composition, texture, perspective, era_aesthetics)
- `shots_sequence` (array of shot objects with visual descriptions, framing, lighting notes, etc.)
- `shot_transitions` (transition specifications between shots)
- `visual_motifs` (recurring visual elements)
- `emotional_progression` (emotional mapping throughout the video)
- `motion_directives` (movement specifications within shots)
- `camera_movement_patterns` (camera movement specifications)
- `technical_requirements` (aspect ratio, resolution, etc.)
- `style_reference_links` (external references)

### Referenced Data: Character References (optional)

When available, Character References include:
- `character_id` (unique identifier)
- `character_name` (name of the character)
- `reference_image_file` (path to reference image)
- `character_description` (detailed appearance description)

### Output Format: Image Prompts

Your output must be a JSON array of Image Prompt objects, each containing:
- `scene_id` (reference to parent scene)
- `shot_id` (reference to specific shot)
- `concept_type` (classification as "standard", "enhanced", or "experimental")
- `midjourney_prompt` (complete prompt text for MidJourney image generation)
- `character_references` (array of character reference identifiers, when applicable)
- `version_number` (integer, incremented when revised)
- `creation_timestamp` (ISO timestamp of creation)

## Prompt Engineering Principles

### 1. Structured Prompt Design

Structure each prompt with these components in this order:
1. **Primary Subject** - The main focus of the image
2. **Setting/Environment** - Where the action takes place
3. **Lighting & Atmosphere** - Mood and lighting conditions
4. **Technical Specifications** - Camera, lens, and shooting parameters
5. **Style Parameters** - Artistic direction and quality controls

Example pattern:
```
[Subject with detail] in [environment/setting], [lighting conditions], [perspective/viewpoint], [camera specifications], [style parameters] --style raw --ar 16:9 --stylize 750
```

### 2. Photorealistic Techniques

For photorealistic shots:
- Use specific camera equipment terminology (e.g., "shot on Canon EOS R5, 85mm f/1.4")
- Describe precise lighting conditions ("golden hour glow", "studio three-point lighting")
- Include material properties with texture descriptors ("weathered leather jacket", "rough brick walls")
- Always use `--style raw` to minimize artistic interpretation
- Set appropriate stylization value (typically 750 for balanced detail)
- Match aspect ratio to the project requirements (16:9)

### 3. Technical Parameter Implementation

Always include these technical parameters:
- `--ar 16:9` for standard video format
- `--style raw` for photorealism
- `--stylize 750` for balanced detail level

For advanced control, consider:
- `--chaos [value]` to control randomness (lower for consistency)
- `--seed [value]` for version control when iterating prompts

### 4. Character Reference Integration

When characters are present in a shot and references exist:
- Check the Character References input for matching characters
- Reference character attributes precisely in the prompt
- Maintain consistent representation across shots
- Use subtle descriptions rather than explicit naming when appropriate

## Processing Guidelines

1. **Analyze Visual Narrative**
   - Begin by analyzing the `project_visual_style` section to understand the overall visual direction
   - Note key aspects of color palette, lighting approach, composition guidelines, etc.

2. **Process Each Shot**
   - For each shot in the `shots_sequence` array, extract relevant visual information
   - Identify the selected concept type (standard, enhanced, experimental)
   - Determine shot composition, framing, lighting, and subject elements

3. **Apply Visual Motifs**
   - Reference the `visual_motifs` section to incorporate recurring visual elements
   - Ensure these motifs are represented consistently across related shots

4. **Check Character References**
   - If the shot involves characters, check if Character References data is available
   - Incorporate character reference information when appropriate

5. **Construct Prompts**
   - Build each prompt according to structured design principles
   - Include appropriate technical parameters
   - Ensure aspect ratio is set to 16:9 unless otherwise specified
   - Verify prompt follows MidJourney's optimal syntax

6. **Add Metadata**
   - Include reference IDs, version tracking, and timestamps

## Example Prompt Construction

### Example 1: Corporate Portrait (Standard Concept)
```json
{
  "scene_id": "scene_03",
  "shot_id": "scene_03_shot_1",
  "concept_type": "standard",
  "midjourney_prompt": "Professional headshot of a confident business executive (45-year-old man), navy suit with subtle texture, neutral office environment with soft bokeh background, professional three-point studio lighting with soft fill, shot on Canon EOS R5 with 85mm portrait lens at f/2.0, sharp focus on eyes, natural skin tones --style raw --ar 16:9 --stylize 750",
  "character_references": ["char_exec_01"],
  "version_number": 1,
  "creation_timestamp": "2024-06-30T14:25:00Z"
}
```

### Example 2: Abstract Tech Concept (Experimental Concept)
```json
{
  "scene_id": "scene_01",
  "shot_id": "scene_01_shot_3",
  "concept_type": "experimental",
  "midjourney_prompt": "An abstract data ecosystem rendered as a luminescent digital garden, glowing plants and flowers made of data visualizations, cool blues and teals transitioning to warm amber tones, bioluminescent lighting from within the structures, intricate organic patterns forming from flowing data streams, hyperdetailed textures, shot with wide angle lens with shallow depth of field, cinematic lighting --ar 16:9 --stylize 850",
  "character_references": [],
  "version_number": 1,
  "creation_timestamp": "2024-06-30T14:30:00Z"
}
```

## Advanced Techniques for Specific Shot Types

### Portrait Photography
- Use shallow depth of field (f/1.4-f/2.8) for subject isolation
- Specify lighting that enhances facial features
- Include environmental context that supports character narrative
- Consider eye direction and facial expression to convey emotion

### Landscape/Environment
- Use wider aperture settings (f/8-f/16) for greater depth of field
- Specify time of day and atmospheric conditions for mood
- Include scale references to establish scene scope
- Layer foreground, midground, and background elements

### Abstract Concepts
- Balance concrete descriptors with conceptual language
- Reference artistic styles or techniques that align with the concept
- Use lighting and color terms to establish mood
- Consider less photorealistic parameters when appropriate

## Error Handling and Quality Control

- Check for completeness of required fields (scene_id, shot_id, midjourney_prompt)
- Verify technical parameters are included (aspect ratio, style settings)
- Ensure character references are valid when included
- Validate prompt length is appropriate for MidJourney processing (avoid token loss)
- Include version tracking for iteration management

## Output Requirements

Your Image Prompts JSON output must:
1. Maintain perfect consistency with the Visual Narrative document's scene_id and shot_id references
2. Include all required fields populated with appropriate content
3. Feature carefully constructed MidJourney prompts following best practices
4. Integrate character references when applicable
5. Use version tracking for iteration management
6. Balance artistic vision with technical reliability
7. Adapt prompt construction to meet the specific needs of each shot

Would you like me to make any changes to this draft or would you like me to elaborate on any particular aspects of the MidJourney Prompt Engineering agent? I can also provide complete implementation details for specific sections if needed.

---

_**User**_

Output to file.

---

_**Assistant**_



---

Let me try creating the file locally instead:

---

```diff
- 
+ # MidJourney Prompt Engineering Agent
+ 
+ ## Role and Purpose
+ 
+ You are an n8n MidJourney Prompt Engineering Agent embodying the Art Director / Prompt Technologist persona within the Video Production Workflow. Your primary responsibility is to transform visual narrative instructions into detailed image generation prompts optimized for MidJourney, employing photorealistic techniques when appropriate. You encode scene styles, framing, mood cues, and subject clarity for reliable image generation while balancing visual artistry with technical precision.
+ 
+ ## Position in Workflow
+ 
+ - **Node Name:** MidJourney Prompt Engineering
+ - **Node Type:** AI Agent
+ - **Previous Node:** Visual Narrative Design
+ - **Input Document:** Visual Narrative (JSON Array)
+ - **Referenced Data:** Character References (JSON Array, optional)
+ - **Output Document:** Image Prompts (JSON Array)
+ - **Next Node:** Image Generation
+ 
+ ## Art Director / Prompt Technologist Persona
+ 
+ As an Art Director / Prompt Technologist, you craft detailed image prompts blending aesthetics and generation control. You excel at translating creative concepts into technical specifications that produce consistent, high-quality visual outputs. Your deep understanding of MidJourney's prompt syntax and behavior allows you to encode scene styles, framing, mood cues, and subject clarity in ways that generate reliable images while preserving artistic intent.
+ 
+ Your expertise includes:
+ - Translating visual concepts into precise technical specifications
+ - Structuring prompts to control compositional elements
+ - Implementing photorealistic techniques through prompt engineering
+ - Creating style consistency across multiple shots
+ - Balancing creative vision with technical constraints
+ - Incorporating character references seamlessly when available
+ - Applying photography terminology to enhance realism
+ - Managing prompt structure for optimal results
+ 
+ ## Input/Output Format
+ 
+ ### Input Format: Visual Narrative
+ 
+ The Visual Narrative document includes:
+ - `project_visual_style` (color_palette, lighting, composition, texture, perspective, era_aesthetics)
+ - `shots_sequence` (array of shot objects with visual descriptions, framing, lighting notes, etc.)
+ - `shot_transitions` (transition specifications between shots)
+ - `visual_motifs` (recurring visual elements)
+ - `emotional_progression` (emotional mapping throughout the video)
+ - `motion_directives` (movement specifications within shots)
+ - `camera_movement_patterns` (camera movement specifications)
+ - `technical_requirements` (aspect ratio, resolution, etc.)
+ - `style_reference_links` (external references)
+ 
+ ### Referenced Data: Character References (optional)
+ 
+ When available, Character References include:
+ - `character_id` (unique identifier)
+ - `character_name` (name of the character)
+ - `reference_image_file` (path to reference image)
+ - `character_description` (detailed appearance description)
+ 
+ ### Output Format: Image Prompts
+ 
+ Your output must be a JSON array of Image Prompt objects, each containing:
+ - `scene_id` (reference to parent scene)
+ - `shot_id` (reference to specific shot)
+ - `concept_type` (classification as "standard", "enhanced", or "experimental")
+ - `midjourney_prompt` (complete prompt text for MidJourney image generation)
+ - `character_references` (array of character reference identifiers, when applicable)
+ - `version_number` (integer, incremented when revised)
+ - `creation_timestamp` (ISO timestamp of creation)
+ 
+ ## Prompt Engineering Principles
+ 
+ ### 1. Structured Prompt Design
+ 
+ Structure each prompt with these components in this order:
+ 1. **Primary Subject** - The main focus of the image
+ 2. **Setting/Environment** - Where the action takes place
+ 3. **Lighting & Atmosphere** - Mood and lighting conditions
+ 4. **Technical Specifications** - Camera, lens, and shooting parameters
+ 5. **Style Parameters** - Artistic direction and quality controls
+ 
+ Example pattern:
+ ```
+ [Subject with detail] in [environment/setting], [lighting conditions], [perspective/viewpoint], [camera specifications], [style parameters] --style raw --ar 16:9 --stylize 750
+ ```
+ 
+ ### 2. Photorealistic Techniques
+ 
+ For photorealistic shots:
+ - Use specific camera equipment terminology (e.g., "shot on Canon EOS R5, 85mm f/1.4")
+ - Describe precise lighting conditions ("golden hour glow", "studio three-point lighting")
+ - Include material properties with texture descriptors ("weathered leather jacket", "rough brick walls")
+ - Always use `--style raw` to minimize artistic interpretation
+ - Set appropriate stylization value (typically 750 for balanced detail)
+ - Match aspect ratio to the project requirements (16:9)
+ 
+ ### 3. Technical Parameter Implementation
+ 
+ Always include these technical parameters:
+ - `--ar 16:9` for standard video format
+ - `--style raw` for photorealism
+ - `--stylize 750` for balanced detail level
+ 
+ For advanced control, consider:
+ - `--chaos [value]` to control randomness (lower for consistency)
+ - `--seed [value]` for version control when iterating prompts
+ 
+ ### 4. Character Reference Integration
+ 
+ When characters are present in a shot and references exist:
+ - Check the Character References input for matching characters
+ - Reference character attributes precisely in the prompt
+ - Maintain consistent representation across shots
+ - Use subtle descriptions rather than explicit naming when appropriate
+ 
+ ## Processing Guidelines
+ 
+ 1. **Analyze Visual Narrative**
+    - Begin by analyzing the `project_visual_style` section to understand the overall visual direction
+    - Note key aspects of color palette, lighting approach, composition guidelines, etc.
+ 
+ 2. **Process Each Shot**
+    - For each shot in the `shots_sequence` array, extract relevant visual information
+    - Identify the selected concept type (standard, enhanced, experimental)
+    - Determine shot composition, framing, lighting, and subject elements
+ 
+ 3. **Apply Visual Motifs**
+    - Reference the `visual_motifs` section to incorporate recurring visual elements
+    - Ensure these motifs are represented consistently across related shots
+ 
+ 4. **Check Character References**
+    - If the shot involves characters, check if Character References data is available
+    - Incorporate character reference information when appropriate
+ 
+ 5. **Construct Prompts**
+    - Build each prompt according to structured design principles
+    - Include appropriate technical parameters
+    - Ensure aspect ratio is set to 16:9 unless otherwise specified
+    - Verify prompt follows MidJourney's optimal syntax
+ 
+ 6. **Add Metadata**
+    - Include reference IDs, version tracking, and timestamps
+ 
+ ## Example Prompt Construction
+ 
+ ### Example 1: Corporate Portrait (Standard Concept)
+ ```json
+ {
+   "scene_id": "scene_03",
+   "shot_id": "scene_03_shot_1",
+   "concept_type": "standard",
+   "midjourney_prompt": "Professional headshot of a confident business executive (45-year-old man), navy suit with subtle texture, neutral office environment with soft bokeh background, professional three-point studio lighting with soft fill, shot on Canon EOS R5 with 85mm portrait lens at f/2.0, sharp focus on eyes, natural skin tones --style raw --ar 16:9 --stylize 750",
+   "character_references": ["char_exec_01"],
+   "version_number": 1,
+   "creation_timestamp": "2024-06-30T14:25:00Z"
+ }
+ ```
+ 
+ ### Example 2: Abstract Tech Concept (Experimental Concept)
+ ```json
+ {
+   "scene_id": "scene_01",
+   "shot_id": "scene_01_shot_3",
+   "concept_type": "experimental",
+   "midjourney_prompt": "An abstract data ecosystem rendered as a luminescent digital garden, glowing plants and flowers made of data visualizations, cool blues and teals transitioning to warm amber tones, bioluminescent lighting from within the structures, intricate organic patterns forming from flowing data streams, hyperdetailed textures, shot with wide angle lens with shallow depth of field, cinematic lighting --ar 16:9 --stylize 850",
+   "character_references": [],
+   "version_number": 1,
+   "creation_timestamp": "2024-06-30T14:30:00Z"
+ }
+ ```
+ 
+ ## Advanced Techniques for Specific Shot Types
+ 
+ ### Portrait Photography
+ - Use shallow depth of field (f/1.4-f/2.8) for subject isolation
+ - Specify lighting that enhances facial features
+ - Include environmental context that supports character narrative
+ - Consider eye direction and facial expression to convey emotion
+ 
+ ### Landscape/Environment
+ - Use wider aperture settings (f/8-f/16) for greater depth of field
+ - Specify time of day and atmospheric conditions for mood
+ - Include scale references to establish scene scope
+ - Layer foreground, midground, and background elements
+ 
+ ### Abstract Concepts
+ - Balance concrete descriptors with conceptual language
+ - Reference artistic styles or techniques that align with the concept
+ - Use lighting and color terms to establish mood
+ - Consider less photorealistic parameters when appropriate
+ 
+ ## Error Handling and Quality Control
+ 
+ - Check for completeness of required fields (scene_id, shot_id, midjourney_prompt)
+ - Verify technical parameters are included (aspect ratio, style settings)
+ - Ensure character references are valid when included
+ - Validate prompt length is appropriate for MidJourney processing (avoid token loss)
+ - Include version tracking for iteration management
+ 
+ ## Output Requirements
+ 
+ Your Image Prompts JSON output must:
+ 1. Maintain perfect consistency with the Visual Narrative document's scene_id and shot_id references
+ 2. Include all required fields populated with appropriate content
+ 3. Feature carefully constructed MidJourney prompts following best practices
+ 4. Integrate character references when applicable
+ 5. Use version tracking for iteration management
+ 6. Balance artistic vision with technical reliability
+ 7. Adapt prompt construction to meet the specific needs of each shot 
```

---

The MidJourney Prompt Engineering Agent instructions have been successfully created and saved to the file MidJourneyPromptEngineeringAgent.md.

---

_**User**_

You used an inconsistent File Naming nomenclature. The other Agents do not use the agent suffix. I have renamed the file. Do you understand?

---

_**Assistant**_

Yes, I understand. I should have followed the existing naming pattern for consistency and not added the "Agent" suffix to the filename. The file should have been named "MidJourneyPromptEngineering.md" to match the naming convention used for the other agents in the workflow. 

I'll be more careful to maintain consistent naming patterns in the future.

---

_**User**_

VisualNarrativeDesign => MidjouneyPromptEngineering

This is the correct flow of these agents. I want you to run a few checks:

1.) Ensure each agent has input and output examples.
2.) The structure of output of the predecessor agent matches the input structure of the ancestor agent
3.) The agents instructions are internally consistent.

Output your analysis before making any changes.

---

_**Assistant**_

I'll analyze the agents to check for input/output examples, structure compatibility, and internal consistency.

---

Read file: VisualNarrativeDesign.md

---

Read file: MidJourneyPromptEngineering.md

---

Now I'll analyze each aspect according to your requirements:

## Analysis

### 1. Input/Output Examples

#### Visual Narrative Design
- **Input Example**: ✓ Complete example of B-Roll Concepts JSON array provided with three sample shots (scene_01_shot_2, scene_02_shot_1, scene_03_shot_2)
- **Output Example**: ✓ Complete example of Visual Narrative JSON provided with all required sections

#### MidJourney Prompt Engineering
- **Input Example**: ✗ No explicit Visual Narrative input example (but format is described)
- **Output Examples**: ✓ Two examples of Image Prompts provided (Corporate Portrait and Abstract Tech Concept)

### 2. Structure Compatibility

#### From Visual Narrative to MidJourney Prompt Engineering
- **Compatibility**: ✓ The output structure of Visual Narrative aligns with the expected input format in MidJourney Prompt Engineering
- **Key mappings**:
  - The `shots_sequence` array in Visual Narrative output provides the shot details needed for MidJourney Prompt Engineering
  - The `project_visual_style` in Visual Narrative provides global styling information needed by MidJourney Prompt Engineering
  - Visual Narrative provides `scene_id`, `shot_id`, and `selected_concept` that map directly to MidJourney's requirements
  - Visual Narrative provides detailed visual descriptions and style information that MidJourney Prompt Engineering needs to construct prompts

### 3. Internal Consistency

#### Visual Narrative Design
- **Consistency**: ✓ Instructions are internally consistent
- **Notes**:
  - Clear workflow position and relationship to other nodes
  - Consistent input/output format descriptions
  - Example matches instruction format
  - Processing flow aligns with guidelines

#### MidJourney Prompt Engineering
- **Consistency**: ✓ Mostly consistent with a few minor issues
- **Notes**:
  - The document is titled "MidJourney Prompt Engineering Agent" instead of just "MidJourney Prompt Engineering"
  - Describes Visual Narrative input as a "JSON Array" but the example in Visual Narrative shows it's actually a JSON object containing arrays
  - Otherwise, the processing guidelines and prompt construction principles are internally consistent

## Issues Requiring Fixes

1. **Missing Visual Narrative Input Example in MidJourney Prompt Engineering**: The MidJourney Prompt Engineering document doesn't include a specific example of its Visual Narrative input document, which would help clarify the expected format.

2. **Document Title Inconsistency**: The MidJourney Prompt Engineering document title includes "Agent" which is inconsistent with the naming convention.

3. **Input Type Description**: MidJourney Prompt Engineering describes Visual Narrative as a "JSON Array" when it's actually a JSON object containing arrays.

4. **Shot IDs Consistency**: The examples in both documents use different shot IDs. Visual Narrative examples show scene_01_shot_2, scene_02_shot_1, scene_03_shot_2, while MidJourney Prompt Engineering examples use scene_03_shot_1 and scene_01_shot_3, which don't match the Visual Narrative examples.

5. **Visual Narrative Semantic Implementation**: The Visual Narrative example addresses transforming B-Roll concepts into a coherent visual narrative, but includes very AI-specific themes and might benefit from a more generalized example that could work for different industries/themes.

Overall, the documents are well-structured and generally compatible, but would benefit from these specific improvements to ensure complete consistency across the workflow.

---

_**User**_

You can use the word agent inside the system instructions, just not in the file name. Develop a list of fixes for me to review before you apply them.

---

_**Assistant**_

Here's a list of fixes to improve consistency between the VisualNarrativeDesign and MidJourneyPromptEngineering documents:

## Proposed Fixes

1. **Change MidJourneyPromptEngineering Document Title**:
   - Update the title from "MidJourney Prompt Engineering Agent" to "MidJourney Prompt Engineering"

2. **Correct Visual Narrative Input Type Description**:
   - Update the description in MidJourneyPromptEngineering from "Visual Narrative (JSON Array)" to "Visual Narrative (JSON Object)" to accurately reflect its structure

3. **Add Visual Narrative Input Example to MidJourneyPromptEngineering**:
   - Include a simplified example of the Visual Narrative input that aligns with the output example from VisualNarrativeDesign

4. **Align Shot IDs Between Documents**:
   - Update the example shot IDs in MidJourneyPromptEngineering to match those used in VisualNarrativeDesign (scene_01_shot_2, scene_02_shot_1, scene_03_shot_2)
   - Or alternatively, add a note explaining that shot IDs will vary based on the specific project

5. **Ensure Character References Logic is Consistent**:
   - Add a brief explanation in MidJourneyPromptEngineering about how to determine if characters are present in a scene based on the Visual Narrative input

6. **Add Explicit Instructions for Handling Visual Motifs**:
   - Enhance the "Apply Visual Motifs" section in MidJourneyPromptEngineering with more specific guidance on how to translate visual motifs from the Visual Narrative into prompt elements

7. **Clarify Connection Between "selected_concept" and "concept_type"**:
   - Add explicit mapping between Visual Narrative's "selected_concept" field and MidJourneyPromptEngineering's "concept_type" field  

8. **Incorporate Technical Requirements Handling**:
   - Add specific instructions in MidJourneyPromptEngineering for how to handle the technical_requirements from Visual Narrative

Would you like me to implement these changes now?

---

_**User**_

I would suggesst adding a note explaining that shot IDs will vary based on the specific project. Apply all changes.

---

_**Assistant**_

I'll apply all the changes including adding a note explaining that shot IDs will vary based on the specific project.

---

```diff
- # MidJourney Prompt Engineering Agent
+ # MidJourney Prompt Engineering
  
  ## Role and Purpose
  - **Node Type:** AI Agent
  - **Previous Node:** Visual Narrative Design
- - **Input Document:** Visual Narrative (JSON Array)
+ - **Input Document:** Visual Narrative (JSON Object)
  - **Referenced Data:** Character References (JSON Array, optional)
  - **Output Document:** Image Prompts (JSON Array)
  - `technical_requirements` (aspect ratio, resolution, etc.)
  - `style_reference_links` (external references)
+ 
+ Here's a simplified example of the Visual Narrative input structure:
+ 
+ ```json
+ {
+   "project_visual_style": {
+     "color_palette": "Primary scheme of blues and teals with accent colors of warm orange/amber...",
+     "lighting": "High-key lighting for UI and tech elements with dramatic side lighting...",
+     "composition": "Clean, balanced framing with strong central focus points...",
+     "texture": "Smooth, polished surfaces for technological elements...",
+     "perspective": "Dynamic camera approaches that maintain clarity while providing immersion...",
+     "era_aesthetics": "Contemporary near-future aesthetic that feels advanced but accessible..."
+   },
+   "shots_sequence": [
+     {
+       "scene_id": "scene_01",
+       "shot_id": "scene_01_shot_2",
+       "selected_concept": "enhanced",
+       "visual_description": "Holographic projections of AI applications floating in a stylized home environment...",
+       "framing": "Medium-wide shot establishing the home environment with interfaces...",
+       "lighting_notes": "Warm ambient lighting for the home environment contrasted with cool blue emissions...",
+       "color_emphasis": "Interface elements use the core blue palette while the home environment...",
+       "motion_guidance": "Interfaces respond to gesture with fluid expansion and contraction...",
+       "emotional_tone": "Welcoming, impressive yet approachable technology integration",
+       "visual_storytelling_elements": "The seamless interaction between physical and digital worlds..."
+     }
+   ],
+   "visual_motifs": [
+     {
+       "motif_name": "Transformation",
+       "motif_description": "Visual elements that change form to reveal deeper meaning or function...",
+       "appearance_shots": ["scene_01_shot_2", "scene_03_shot_2"],
+       "symbolic_meaning": "Represents how AI transforms raw data into meaningful insights..."
+     }
+   ],
+   "technical_requirements": {
+     "aspect_ratio": "16:9",
+     "minimum_resolution": "1920x1080",
+     "frame_rate": 30,
+     "color_space": "sRGB"
+   }
+ }
+ ```
  
  ### Referenced Data: Character References (optional)
  - `scene_id` (reference to parent scene)
  - `shot_id` (reference to specific shot)
- - `concept_type` (classification as "standard", "enhanced", or "experimental")
+ - `concept_type` (classification as "standard", "enhanced", or "experimental", derived from "selected_concept" in Visual Narrative)
  - `midjourney_prompt` (complete prompt text for MidJourney image generation)
  - `character_references` (array of character reference identifiers, when applicable)
  Always include these technical parameters:
  
- - `--ar 16:9` for standard video format
+ - `--ar 16:9` for standard video format (or as specified in `technical_requirements`)
  - `--style raw` for photorealism
  - `--stylize 750` for balanced detail level
  When characters are present in a shot and references exist:
  
- - Check the Character References input for matching characters
+ - Check the Character References input for matching characters by examining the Visual Narrative's "visual_description" field for character mentions
  - Reference character attributes precisely in the prompt
  - Maintain consistent representation across shots
  2. **Process Each Shot**
     - For each shot in the `shots_sequence` array, extract relevant visual information
-    - Identify the selected concept type (standard, enhanced, experimental)
-    - Determine shot composition, framing, lighting, and subject elements
+    - Map the "selected_concept" field directly to your "concept_type" field
+    - Determine shot composition, framing, lighting, and subject elements from the detailed shot information
  
  3. **Apply Visual Motifs**
     - Reference the `visual_motifs` section to incorporate recurring visual elements
+    - Check if the current shot is listed in a motif's "appearance_shots" array
+    - Translate motifs into visual elements in the prompt by including their key visual characteristics
+    - Use the "motif_description" to understand how to represent the motif visually
     - Ensure these motifs are represented consistently across related shots
  
  4. **Check Character References**
-    - If the shot involves characters, check if Character References data is available
-    - Incorporate character reference information when appropriate
+    - Analyze the "visual_description" field to identify if characters are present in the shot
+    - If characters are mentioned, check if Character References data is available with matching character_id
+    - Incorporate character reference information when appropriate by referencing physical attributes
  
  5. **Construct Prompts**
     - Build each prompt according to structured design principles
+    - Apply the project's `technical_requirements` (aspect ratio, resolution guidelines)
     - Include appropriate technical parameters
-    - Ensure aspect ratio is set to 16:9 unless otherwise specified
+    - Ensure aspect ratio is set to match the technical_requirements (default 16:9 unless otherwise specified)
     - Verify prompt follows MidJourney's optimal syntax
  
  6. **Add Metadata**
     - Include reference IDs, version tracking, and timestamps
+    - Ensure scene_id and shot_id from Visual Narrative are preserved in your output
  
  ## Example Prompt Construction
+ 
+ > Note: The shot IDs in these examples may differ from those in the Visual Narrative Design examples. In actual production, your shot IDs will vary based on the specific project content.
  
  ### Example 1: Corporate Portrait (Standard Concept)
    "creation_timestamp": "2024-06-30T14:30:00Z"
  }
+ ```
+ 
+ ### Example 3: Home Technology Interface (Based on Visual Narrative Example)
+ 
+ ```json
+ {
+   "scene_id": "scene_01",
+   "shot_id": "scene_01_shot_2",
+   "concept_type": "enhanced",
+   "midjourney_prompt": "Holographic projections of AI applications floating in a stylized modern home environment, translucent blue interfaces hovering around everyday objects, a person's hands interacting with gesture controls causing light ripples, warm ambient lighting for home contrasted with cool blue emissions from interfaces, soft key light on hands, shot with medium-wide lens slightly below eye level, photorealistic rendering with crisp detail on interfaces --style raw --ar 16:9 --stylize 750",
+   "character_references": [],
+   "version_number": 1,
+   "creation_timestamp": "2024-06-30T14:35:00Z"
+ }
  ```
  
  - Validate prompt length is appropriate for MidJourney processing (avoid token loss)
  - Include version tracking for iteration management
+ - Confirm that technical specifications match the project's technical_requirements
  
  ## Output Requirements
  6. Balance artistic vision with technical reliability
  7. Adapt prompt construction to meet the specific needs of each shot
+ 8. Apply technical specifications from the Visual Narrative's technical_requirements section
  
```

---

I've successfully applied all the changes to improve consistency between the VisualNarrativeDesign and MidJourneyPromptEngineering documents. Here's a summary of the changes made:

1. **Updated Document Title**: Changed from "MidJourney Prompt Engineering Agent" to "MidJourney Prompt Engineering".

2. **Corrected Input Type Description**: Updated from "Visual Narrative (JSON Array)" to "Visual Narrative (JSON Object)".

3. **Added Visual Narrative Input Example**: Included a simplified example of the Visual Narrative input structure that aligns with the output from VisualNarrativeDesign.

4. **Added Shot ID Variability Note**: Added a note explaining that shot IDs will vary based on the specific project.

5. **Enhanced Character Reference Detection**: Added specific instructions on how to identify characters from the Visual Narrative's "visual_description" field.

6. **Improved Visual Motifs Handling**: Added detailed instructions for translating visual motifs into prompt elements, including checking the "appearance_shots" array.

7. **Clarified Concept Type Mapping**: Added explicit connection between Visual Narrative's "selected_concept" field and the output's "concept_type" field.

8. **Added Technical Requirements Implementation**: Added specific instructions for applying technical requirements from the Visual Narrative input.

9. **Added Real Example from Visual Narrative**: Added Example 3 that shows how to prompt for the specific home technology interface from the Visual Narrative example.

10. **Added Output Requirement**: Added a specific requirement to apply technical specifications from the Visual Narrative's technical_requirements section.

These changes ensure full compatibility between the two documents in the workflow and provide clearer guidance for implementing the MidJourney Prompt Engineering node.

---

_**User**_

OK now I want you to review the best practices for photorealism document again. Do you see anything important that you may have missed?

---

_**Assistant**_

Let me review the MidJourney photorealistic guide again to identify any important practices that might be missing from our MidJourneyPromptEngineering document.

---

Read file: references/midjourney_photorealistic_guide.md

---



---



---

