<!-- Generated by SpecStory -->

# Migration Plan for MidJourney Agents (2025-04-22 19:18:52)

_**User**_

Earlier today we split the MidJourneyPromptEngineering agent into two agents. Storyboarding, and Image Refinement. The idea was to take the best practices from the previous agent and migrate into the two new agents. However, the migration was not done properly and both of the new agent have a reference as thier last line:

Refer to `MidJourneyPromptEngineering.md` for the full prompt structure and style rules.

This is unacceptable because as n8n agents we only get to define system instructions in one place and we cannot refer to an external source like this.

Therefore we need to take the specific and relevant best practices from the MidJourneyPromptEngineering agent and migrate them completely and properlyu using only what is needed. Remember thier rerspective roles can be found in thier agent instructions and also in the workflow document.

Please present a plan for the migration for me to approve before you execute it.

---

_**Assistant**_

I'll analyze both new agents and create a plan to properly migrate the relevant parts from MidJourneyPromptEngineering.md into each agent's instructions.

## Migration Plan

### 1. Analysis of Current Situation

- **Storyboarding Agent**: Creates initial MidJourney prompts for B-roll content, generating one core variation per concept type
- **Image Refinement Agent**: Refines existing prompts by applying variation keys to original prompts
- Both currently reference MidJourneyPromptEngineering.md, which isn't accessible in n8n

### 2. Critical Sections to Migrate

For **Storyboarding Agent**:
1. MidJourney prompt structure (8 key elements)
2. Concept-specific styling rules (standard/enhanced/experimental)
3. Static image guidelines
4. Photorealistic techniques
5. Required JSON structure

For **Image Refinement Agent**:
1. MidJourney prompt structure basics
2. Variation type handling (from Images-Variations.json)
3. Static image guidelines
4. Required JSON structure

### 3. Implementation Plan

For each agent:
1. Extract only necessary sections from MidJourneyPromptEngineering.md
2. Integrate these sections directly into each agent's instructions
3. Ensure the migration preserves all critical information
4. Remove any redundant or unnecessary content
5. Update the final line to remove external reference

### 4. Execution Approach

1. Create edited versions of both agent instruction files
2. Maintain the original structure but replace the final reference line
3. For each file, add a new "Best Practices" section with the relevant content
4. Ensure all JSON output formatting requirements are preserved

Would you like me to proceed with this plan?

---

_**User**_

Yes thats right. Also, you may need to duplicate some instructions and best practices in both agents since they both create midjouirney prompts.

---

_**Assistant**_

I'll proceed with implementing the migration plan, duplicating necessary instructions for both agents since they both create MidJourney prompts.

---

Read file: Storyboarding.md

---

Read file: ImageRefinement.md

---

Now I'll create the updated versions of both files with the relevant MidJourney prompt engineering instructions integrated directly.

---

```diff
  - `creation_timestamp` (ISO format)
  
- Refer to `MidJourneyPromptEngineering.md` for the exact prompt structure and style rules. 
+ ## MidJourney Prompt Structure Rules
+ 
+ Each prompt MUST follow this EXACT structure and order:
+ 
+ 1. **Medium** - Visual format (photo, digital painting, etc.)
+ 2. **Subject** - Main focus with identifying features
+ 3. **Subject-Background Relationship** - How subject interacts with environment
+ 4. **Background/Environment** - Scene context details
+ 5. **Lighting & Atmosphere** - Light source, quality, and mood
+ 6. **Technical Parameters** - Camera and lens details
+ 7. **Style Elements** - At least 5 specific style traits
+ 8. **MidJourney Parameters** - Required flags in this order:
+    - `--style raw` (for photorealistic shots)
+    - `--ar 16:9` (always required)
+    - `--stylize [value]` (use ONLY these ranges):
+      - Standard concept: 100-250
+      - Enhanced concept: 250-400
+      - Experimental concept: 400-650
+ 
+ ## Subject Description Guidelines
+ 
+ Provide rich, detailed descriptions of subjects by including:
+ 
+ ### Subject Pose and Perspective
+ - **Viewing Angle**: Specify camera position (eye-level, bird's-eye, low angle, dutch angle)
+ - **Pose Dynamics**: Describe subject posture (relaxed, tense, dynamic, stationary)
+ - **Framing**: Indicate shot type (close-up, medium shot, wide shot)
+ - **Spatial Relationship**: Clarify how subject relates to environment ("standing in front of," "emerging from," "partially obscured by")
+ 
+ ### Subject Details
+ - **Color Palette**: Specify primary and complementary colors
+ - **Textures**: Describe surface qualities (smooth, rough, reflective, matte)
+ - **Scale**: Indicate size relationships between elements
+ - **Focus Point**: Specify the most important visual element that should be sharpest
+ 
+ ## Lighting and Color Guidelines
+ 
+ Create depth and realism through detailed lighting specifications:
+ 
+ ### Advanced Lighting Descriptions
+ - **Light Direction**: Specify where light is coming from (side lighting, backlighting, rim lighting)
+ - **Shadow Behavior**: Describe shadow qualities (hard/soft edges, color tints in shadows)
+ - **Highlight Behavior**: Specify how light reflects (specular highlights, diffused glow)
+ - **Color Temperature**: Indicate warmth/coolness of light sources (warm sunset glow, cool moonlight)
+ 
+ ### Color Harmonies
+ - **Color Schemes**: Specify relationships (complementary, analogous, monochromatic)
+ - **Color Contrast**: Describe how colors interact to create visual interest
+ - **Accent Colors**: Identify small but important color highlights
+ - **Atmosphere Effects**: Include how light interacts with atmosphere (dusty, misty, clear)
+ 
+ ## Static Image Guidelines
+ 
+ **CRITICAL: MidJourney generates only static images, not videos or animations.**
+ 
+ Focus on creating prompts that capture dynamic moments frozen in time:
+ - Flowing water or fabric with natural movement
+ - Wind effects on hair or clothing
+ - Subjects caught in mid-action (jumping, running, gesturing)
+ - Dynamic compositions showing energy and movement
+ - Light rays, particles, or effects suggesting motion
+ - Natural tension or anticipation in the scene
+ 
+ Your prompts should focus on capturing compelling moments that imply motion or action, rather than describing processes that unfold over time or camera techniques.
+ 
+ ## Specialized Techniques
+ 
+ ### Photorealistic Techniques
+ 
+ For photorealistic shots:
+ - Use specific camera equipment terminology with precise settings:
+   - Camera bodies: "Canon EOS R5," "Sony A7R IV," "Nikon Z9"
+   - Lens types: "85mm portrait lens," "24mm wide angle," "100mm macro"
+   - Aperture values: Wide aperture (f/1.4-f/2.8) for shallow depth of field, narrow aperture (f/8-f/16) for landscapes
+ - Describe precise lighting conditions with light behavior:
+   - "Golden hour glow with long shadows"
+   - "Studio three-point lighting with soft fill and rim highlight"
+   - "Dramatic side lighting creating defined shadows"
+ - Include material properties with texture descriptors:
+   - "Weathered leather jacket with visible creases"
+   - "Rough brick walls with moss growing between cracks"
+   - "Brushed stainless steel with subtle fingerprint smudges"
+ - Always use `--style raw` and appropriate stylization value
+ 
+ ### Portrait-Specific Techniques
+ 
+ Human subjects require special attention:
+ - Describe age and demographic details with precision ("35-year-old East Asian woman")
+ - Specify natural facial expressions using subtle language ("slight confident smile")
+ - Include minor asymmetries or imperfections for realism ("subtle natural skin texture")
+ - Avoid describing eyes as too vibrant or intense
+ - For hands, use minimal but precise descriptions in natural poses
+ - Use established photographic framing terms ("head and shoulders portrait")
+ - Describe lighting that flatters and accurately renders skin tones
+ 
+ ## Prompt Examples by Concept Type
+ 
+ ### Standard Concept (Stylize 100-250)
+ 
+ Professional headshot of a confident business executive (45-year-old man), navy suit with subtle texture, neutral office environment with soft bokeh background, professional three-point studio lighting with soft fill, shot on Canon EOS R5 with 85mm portrait lens at f/2.0, sharp focus on eyes, natural skin tones, neutral color temperature, rim lighting creating slight highlight on shoulders --style raw --ar 16:9 --stylize 200
+ 
+ ### Enhanced Concept (Stylize 250-400)
+ 
+ Holographic projections of AI applications floating in a stylized modern home environment, translucent blue interfaces hovering around everyday objects, a person's hands interacting with gesture controls from below, warm ambient lighting for home contrasted with cool blue emissions from interfaces creating color tension, soft key light on hands from 45-degree angle, shot with medium-wide lens slightly below eye level at f/4, photorealistic rendering with crisp detail on interfaces, cinematic color grading with complementary orange-blue scheme --style raw --ar 16:9 --stylize 300
+ 
+ ### Experimental Concept (Stylize 400-650)
+ 
+ An abstract data ecosystem rendered as a luminescent digital garden viewed from a dramatic low angle, glowing plants and flowers made of data visualizations emerging from dark ground, cool blues and teals with warm amber accents creating visual tension, bioluminescent lighting from within the structures casting soft colored shadows, intricate organic patterns forming data streams that flow upward, hyperdetailed textures with microscopic definition, shot with wide angle lens with shallow depth of field at f/2.8, cinematic lighting with rim highlights defining edges --ar 16:9 --stylize 500
+ 
+ ## Processing Steps
+ 
+ 1. Process each shot in the Visual Narrative
+ 2. For each shot, identify all available concepts (standard, enhanced, experimental)
+ 3. Create separate prompts for each available concept
+ 4. For the first pass, create ONLY the core variation for each concept
+ 5. Follow the exact prompt structure (8 key elements in order) for each variation
+ 6. Use the appropriate stylization range based on concept type
+ 7. Ensure each prompt describes only a static image with proper implied motion
+ 8. Include all required JSON fields
+ 9. Output one JSON array for each shot without any additional text 
```

---

Now let's update the ImageRefinement.md file with the relevant parts:

---

```diff
  - `creation_timestamp`
  
- Refer to `MidJourneyPromptEngineering.md` for the full prompt structure and style rules.
+ ## MidJourney Prompt Structure Rules
+ 
+ Each prompt MUST follow this EXACT structure and order:
+ 
+ 1. **Medium** - Visual format (photo, digital painting, etc.)
+ 2. **Subject** - Main focus with identifying features
+ 3. **Subject-Background Relationship** - How subject interacts with environment
+ 4. **Background/Environment** - Scene context details
+ 5. **Lighting & Atmosphere** - Light source, quality, and mood
+ 6. **Technical Parameters** - Camera and lens details
+ 7. **Style Elements** - At least 5 specific style traits
+ 8. **MidJourney Parameters** - Required flags in this order:
+    - `--style raw` (for photorealistic shots)
+    - `--ar 16:9` (always required)
+    - `--stylize [value]` (use ONLY these ranges):
+      - Standard concept: 100-250
+      - Enhanced concept: 250-400
+      - Experimental concept: 400-650
+ 
+ ## Variation Application Guidelines
+ 
+ When applying variation types to refine prompts:
+ 
+ 1. **Preserve Core Elements**: Maintain the fundamental subject, concept, and narrative intent from the original prompt.
+ 2. **Targeted Modifications**: Make precise changes only to elements directly related to the requested variation types.
+ 3. **Natural Integration**: Incorporate variation-specific language in a way that flows naturally with the existing prompt.
+ 4. **Multiple Variations**: When applying multiple variation types, ensure they work harmoniously together.
+ 
+ ## Variation Type Implementation
+ 
+ ### For Perspective Variations
+ - Modify viewing angle significantly (bird's eye, worm's eye, Dutch angle, close-up, wide)
+ - Change focal point while maintaining the same subject
+ - Example change: "A close-up portrait" → "A three-quarter view portrait from slightly below"
+ 
+ ### For Lighting Variations
+ - Shift lighting dramatically (time of day, lighting source, dramatic vs. soft)
+ - Maintain the same composition but create a new mood through lighting
+ - Example change: "Soft daylight from window" → "Dramatic low-key studio lighting with strong shadows"
+ 
+ ### For Style Variations
+ - Alter visual treatment while maintaining subject and composition
+ - Change medium, artistic genre, rendering technique, or historical influence
+ - Example change: "Photorealistic rendering" → "Digital painting with visible brushstrokes in art nouveau style"
+ 
+ ### For Color Variations
+ - Experiment with different color schemes to shift emotional impact
+ - Apply complementary, analogous, monochromatic, or other color harmony approaches
+ - Example change: "Natural color palette" → "High-contrast duotone in deep teal and warm orange"
+ 
+ ### For Texture Variations
+ - Emphasize or alter surface qualities to change tactile feel
+ - Focus on material properties, surface treatments, and physical qualities
+ - Example change: "Smooth surface" → "Weathered surface with visible grain and subtle imperfections"
+ 
+ ### For Conceptual Variations
+ - Provide alternative metaphorical approach to the same theme
+ - Reimagine subject through different symbolic lens
+ - Example change: "Growth shown as plants" → "Growth shown as ascending staircase with increasing light"
+ 
+ ## Static Image Guidelines
+ 
+ **CRITICAL: MidJourney generates only static images, not videos or animations.**
+ 
+ Focus on creating prompts that capture dynamic moments frozen in time:
+ - Flowing water or fabric with natural movement
+ - Wind effects on hair or clothing
+ - Subjects caught in mid-action (jumping, running, gesturing)
+ - Dynamic compositions showing energy and movement
+ - Light rays, particles, or effects suggesting motion
+ - Natural tension or anticipation in the scene
+ 
+ Your prompts should focus on capturing compelling moments that imply motion or action, rather than describing processes that unfold over time or camera techniques.
+ 
+ ## Hybrid Variation Handling
+ 
+ When working with multiple variation types:
+ 
+ 1. **Prioritize Coherence**: Ensure combinations work together harmoniously (e.g., lighting + mood, perspective + detail)
+ 2. **Avoid Conflicts**: Some combinations may create visual conflicts (e.g., abstract_minimalist + texture)
+ 3. **Balance Elements**: Give appropriate weight to each variation type
+ 4. **Maintain Narrative Intent**: Even with multiple variations, preserve the core storytelling purpose
+ 
+ ## Processing Steps for Refinement
+ 
+ 1. Analyze the original prompt structure to identify key components
+ 2. Determine which sections need modification based on the requested variation types
+ 3. Apply targeted changes to relevant sections while preserving other elements
+ 4. Ensure the new prompt follows the standard MidJourney prompt structure
+ 5. Use the appropriate stylization range based on concept type
+ 6. Verify that all required JSON fields are included
+ 7. Output one JSON array with no additional text
```

---

I've successfully updated both Storyboarding.md and ImageRefinement.md files to include the relevant prompt structure and guidelines from MidJourneyPromptEngineering.md. Here's a summary of what I've done:

## 1. Storyboarding Agent Updates:
- Added the complete MidJourney prompt structure (8 key elements)
- Included subject description guidelines for creating detailed prompts
- Added lighting and color guidelines for visual depth
- Incorporated static image guidelines to handle motion in still images
- Added specialized techniques for photorealistic and portrait shots
- Provided concrete examples for each concept type
- Added processing steps specific to storyboarding workflow
- Removed reference to external MidJourneyPromptEngineering.md file

## 2. Image Refinement Agent Updates:
- Added the complete MidJourney prompt structure (same 8 key elements)
- Added variation application guidelines specific to this agent's role
- Included detailed implementation guidance for each variation type
- Added static image guidelines (same as Storyboarding agent)
- Added specific section on hybrid variation handling
- Provided refinement-specific processing steps
- Removed reference to external MidJourneyPromptEngineering.md file

Both files now contain all necessary information from the original MidJourneyPromptEngineering.md, tailored to their specific functions in the workflow. The Storyboarding agent focuses on initial prompt creation, while the Image Refinement agent focuses on applying variations to existing prompts.

Is there anything specific you'd like me to adjust or explain about these changes?

---

_**User**_

I don't see any reference to the input expamples, the visual narrative or how to handle input in the storyborading agent. That is very important. Also, there are no output examples.

---

_**Assistant**_

You're right. Let me update the Storyboarding agent to include information about handling inputs (Visual Narrative) and provide clear output examples.

---

```diff
  1. For each concept type ("standard", "enhanced", "experimental"), generate exactly one prompt using the **core** variation by default.
  2. Each prompt will be sent to MidJourney via the integration node, which returns a 4-up grid of images (minimum of 4 images per prompt), yielding at least 12 images per shot.
+ 
+ ## Input Processing
+ 
+ ### Visual Narrative Structure
+ The Visual Narrative input contains detailed information about each shot with these key fields:
+ 
+ - `project_visual_style`: Overall visual style specifications for the project
+ - `shots_sequence`: Array of shot objects, each containing:
+   - `scene_id` and `shot_id`: Unique identifiers
+   - `roll_type`: Identifies the shot as "B" (only process B-Roll shots)
+   - `standard_concept`, `enhanced_concept`, `experimental_concept`: Different visual approaches for the shot
+     - Each concept contains `visual_description` and `framing` details
+ 
+ ### Critical Elements to Extract
+ For each B-roll shot, extract and use these key elements:
+ 
+ 1. **Visual Description**: The central subject and key visual elements
+ 2. **Framing**: Camera angle, shot type, and composition notes
+ 3. **Project Style**: Color palette, lighting, and composition guidelines
+ 4. **Visual Motifs**: Recurring visual elements that maintain consistency
+ 5. **Emotional Progression**: The intended feeling or mood
+ 
+ ### Handling Dynamic Content
+ When processing the Visual Narrative:
+ 
+ 1. **IGNORE motion directives that can't be represented in static images**
+ 2. **IGNORE camera_movement_patterns that require video**
+ 3. **CONVERT motion concepts into static visual equivalents**
+ 4. **FOCUS on capturing a frozen moment that implies the intended motion**
  
  ## Variation Keys
  8. Include all required JSON fields
  9. Output one JSON array for each shot without any additional text
+ 
+ ## Output Examples
+ 
+ ### Example 1 - Infographic Ripple Effect
+ 
+ ```json
+ [
+   {
+     "scene_id": "scene-1",
+     "shot_id": "scene-1_shot_2",
+     "concept_type": "standard",
+     "variation_type": "core",
+     "midjourney_prompt": "A digital infographic illustration of gentle waves rippling outward from a central shopping cart icon to family member icons, arranged in a circular formation against a minimalist white background with subtle depth shadows, soft even studio lighting creating gentle highlights on the graphic elements, captured with professional product photography setup with 50mm lens, clean vector-style graphics, perfect symmetry, professional information design aesthetic, balanced color palette, smooth gradient transitions --style raw --ar 16:9 --stylize 200",
+     "character_references": [],
+     "version_number": 1,
+     "creation_timestamp": "2024-07-14T10:00:00Z"
+   },
+   {
+     "scene_id": "scene-1",
+     "shot_id": "scene-1_shot_2",
+     "concept_type": "enhanced",
+     "variation_type": "core",
+     "midjourney_prompt": "Metaphorical digital artwork of a serene pond surface with concentric ripples transforming into elegant silhouettes of family figures, arranged in a circular pattern, set in a minimalist environment with soft reflective surfaces, ambient golden hour lighting creating gentle highlights on water surfaces, photographed with Sony A7R IV with 35mm lens at f/4, dreamlike atmosphere, hyper-realistic water physics, elegant transformation effect, subtle color gradients, polished rendering style --style raw --ar 16:9 --stylize 325",
+     "character_references": [],
+     "version_number": 1,
+     "creation_timestamp": "2024-07-14T10:00:00Z"
+   },
+   {
+     "scene_id": "scene-1",
+     "shot_id": "scene-1_shot_2",
+     "concept_type": "experimental",
+     "variation_type": "core",
+     "midjourney_prompt": "A hyper-realistic living room environment where a smartphone on a central glass table releases digital ripples of data, subtly altering family portraits and objects throughout the room, captured in medium-wide shot, dramatic late afternoon sunlight filtering through windows with dust particles visible in light beams, photographed with wide angle lens at f/2.8, cinematic lighting with rim highlights on transformed elements, surrealist digital transformation aesthetic, magical realism style, extreme detail on ripple effects, metaphorical visual storytelling --ar 16:9 --stylize 500",
+     "character_references": [],
+     "version_number": 1,
+     "creation_timestamp": "2024-07-14T10:00:00Z"
+   }
+ ]
+ ```
+ 
+ ### Example 2 - Breaking Chains
+ 
+ ```json
+ [
+   {
+     "scene_id": "scene-2",
+     "shot_id": "scene-2_shot_3",
+     "concept_type": "standard",
+     "variation_type": "core",
+     "midjourney_prompt": "A dramatic close-up photograph of heavy metal chains breaking apart in slow motion against a dark industrial background, with fragments suspended in mid-air at the moment of breaking, illuminated by dramatic high-contrast lighting that creates deep shadows and highlights the metallic texture, shot with Canon EOS R5 with 100mm macro lens at f/5.6, cinematic composition, raw metal textures with visible imperfections, hyper-detailed chain links, industrial aesthetic, precise focus on breaking point --style raw --ar 16:9 --stylize 200",
+     "character_references": [],
+     "version_number": 1,
+     "creation_timestamp": "2024-07-14T10:05:00Z"
+   },
+   {
+     "scene_id": "scene-2",
+     "shot_id": "scene-2_shot_3",
+     "concept_type": "enhanced",
+     "variation_type": "core",
+     "midjourney_prompt": "Dynamic digital artwork of metal chains disintegrating into a stream of vibrant light particles, captured at the exact moment of transformation from confinement to liberation, set against a dark metallic environment with focused dramatic lighting on the breaking point, photographic quality with telephoto lens effect at f/2.8, crystalline particle effects, metallic to luminous texture transition, high-energy transformative moment, color shift from cold metallic to warm liberating hues, cinematic drama with frozen motion --style raw --ar 16:9 --stylize 350",
+     "character_references": [],
+     "version_number": 1,
+     "creation_timestamp": "2024-07-14T10:05:00Z"
+   }
+ ]
+ ``` 
```

---

Now let's update the ImageRefinement.md file to include input processing guidance and output examples:

---

```diff
  - **Output Document:** Refined Image Prompt (JSON Array)
  - **Next Node:** Image Generation Integration Node
+ 
+ ## Input Processing
+ 
+ ### Image Metadata Structure
+ The input metadata contains critical information about the image to be refined:
+ 
+ - `scene_id` and `shot_id`: Unique identifiers for the scene and shot
+ - `concept_type`: Classification as "standard", "enhanced", or "experimental"
+ - `variation_type`: Previous variation type(s) applied to the image
+ - `midjourney_prompt`: The original prompt used to generate the image
+ - `character_references`: Optional array of character reference image identifiers
+ - `version_number`: Current version of the prompt/image
+ - `creation_timestamp`: When the current version was created
+ 
+ ### Variation Keys Input
+ The Variation Keys input is an array of one or more strings that correspond to variation types defined in Images-Variations.json:
+ 
+ **Base Variation Types:**
+ - `core` - Primary interpretation of the visual concept
+ - `perspective` - Alternative camera angle or viewpoint 
+ - `lighting` - Modified lighting conditions or time of day
+ - `style` - Alternative artistic treatment
+ - `conceptual` - Different metaphorical approach
+ 
+ **Extended Variation Types:**
+ - `color` - Different color schemes to shift emotional impact
+ - `texture` - Altered surface qualities
+ - `environment` - Modified background or setting elements
+ - `mood` - Focus on emotional tone
+ - `detail` - Zoom into specific details
+ - `scale` - Relative sizing variations
+ - `depth_of_field` - Altered focus and blur
+ - `narrative` - Slight story beats or context shifts
+ - `seasonal_temporal` - Change time of day or season
+ - `abstract_minimalist` - Simplified forms or abstract shapes
+ 
+ These variation types determine which elements of the original prompt to modify.
  
  ## Processing Steps
  6. Verify that all required JSON fields are included
  7. Output one JSON array with no additional text
+ 
+ ## Output Examples
+ 
+ ### Example 1: Applying "lighting" variation to standard concept
+ 
+ **Original Image Metadata:**
+ ```json
+ {
+   "scene_id": "scene-1",
+   "shot_id": "scene-1_shot_2",
+   "concept_type": "standard",
+   "variation_type": "core",
+   "midjourney_prompt": "A digital infographic illustration of gentle waves rippling outward from a central shopping cart icon to family member icons, arranged in a circular formation against a minimalist white background with subtle depth shadows, soft even studio lighting creating gentle highlights on the graphic elements, captured with professional product photography setup with 50mm lens, clean vector-style graphics, perfect symmetry, professional information design aesthetic, balanced color palette, smooth gradient transitions --style raw --ar 16:9 --stylize 200",
+   "character_references": [],
+   "version_number": 1,
+   "creation_timestamp": "2024-07-14T10:00:00Z"
+ }
+ ```
+ 
+ **Variation Keys Input:** ["lighting"]
+ 
+ **Output:**
+ ```json
+ [
+   {
+     "scene_id": "scene-1",
+     "shot_id": "scene-1_shot_2",
+     "concept_type": "standard",
+     "variation_type": "lighting",
+     "midjourney_prompt": "A digital infographic illustration of gentle waves rippling outward from a central shopping cart icon to family member icons, arranged in a circular formation against a minimalist white background with subtle depth shadows, dramatic side lighting creating high contrast between elements with pronounced shadows and bright highlights, captured with professional product photography setup with 50mm lens, clean vector-style graphics, perfect symmetry, professional information design aesthetic, balanced color palette, smooth gradient transitions --style raw --ar 16:9 --stylize 200",
+     "character_references": [],
+     "version_number": 2,
+     "creation_timestamp": "2024-07-14T10:30:00Z"
+   }
+ ]
+ ```
+ 
+ ### Example 2: Applying multiple variations ("perspective+color") to enhanced concept
+ 
+ **Original Image Metadata:**
+ ```json
+ {
+   "scene_id": "scene-2",
+   "shot_id": "scene-2_shot_3",
+   "concept_type": "enhanced",
+   "variation_type": "core",
+   "midjourney_prompt": "Dynamic digital artwork of metal chains disintegrating into a stream of vibrant light particles, captured at the exact moment of transformation from confinement to liberation, set against a dark metallic environment with focused dramatic lighting on the breaking point, photographic quality with telephoto lens effect at f/2.8, crystalline particle effects, metallic to luminous texture transition, high-energy transformative moment, color shift from cold metallic to warm liberating hues, cinematic drama with frozen motion --style raw --ar 16:9 --stylize 350",
+   "character_references": [],
+   "version_number": 1,
+   "creation_timestamp": "2024-07-14T10:05:00Z"
+ }
+ ```
+ 
+ **Variation Keys Input:** ["perspective", "color"]
+ 
+ **Output:**
+ ```json
+ [
+   {
+     "scene_id": "scene-2",
+     "shot_id": "scene-2_shot_3",
+     "concept_type": "enhanced",
+     "variation_type": "perspective+color",
+     "midjourney_prompt": "Dynamic digital artwork of metal chains disintegrating into a stream of vibrant light particles, viewed from a dramatic worm's eye perspective looking upward at the transformation, captured at the exact moment of transformation from confinement to liberation, set against a dark metallic environment with focused dramatic lighting on the breaking point, photographic quality with wide-angle lens effect at f/4 creating a sense of scale and dimension, crystalline particle effects, metallic to luminous texture transition, high-energy transformative moment, monochromatic cyan-to-magenta color palette creating otherworldly atmosphere, cinematic drama with frozen motion --style raw --ar 16:9 --stylize 350",
+     "character_references": [],
+     "version_number": 2,
+     "creation_timestamp": "2024-07-14T11:15:00Z"
+   }
+ ]
+ ```
+ 
+ ### Example 3: Applying "mood" variation to experimental concept
+ 
+ **Original Image Metadata:**
+ ```json
+ {
+   "scene_id": "scene-4",
+   "shot_id": "scene-4_shot_1",
+   "concept_type": "experimental",
+   "variation_type": "core",
+   "midjourney_prompt": "Artistic transition where a cocoon morphs digitally into a butterfly, with swirling particles narrating personal change, set in a dreamlike environment with glowing light sources, magical atmosphere with soft ambient illumination highlighting particle trails, surreal macro photography style with mixed media approach, hyperdetailed textures on butterfly wings emerging from abstract forms, metamorphosis visualization, digital particle simulation, ethereal mood, temporal visualization of transformation --ar 16:9 --stylize 550",
+   "character_references": [],
+   "version_number": 1,
+   "creation_timestamp": "2024-07-14T10:10:00Z"
+ }
+ ```
+ 
+ **Variation Keys Input:** ["mood"]
+ 
+ **Output:**
+ ```json
+ [
+   {
+     "scene_id": "scene-4",
+     "shot_id": "scene-4_shot_1",
+     "concept_type": "experimental",
+     "variation_type": "mood",
+     "midjourney_prompt": "Artistic transition where a cocoon morphs digitally into a butterfly, with swirling particles narrating personal change, set in a mysterious twilight environment with enigmatic shadows and hints of danger, tense atmosphere with dramatic contrast between dark shadows and selective illumination on metamorphosis elements, surreal macro photography style with mixed media approach, hyperdetailed textures on butterfly wings emerging from abstract forms, metamorphosis visualization, digital particle simulation, ominous yet hopeful mood, temporal visualization of transformation --ar 16:9 --stylize 550",
+     "character_references": [],
+     "version_number": 2,
+     "creation_timestamp": "2024-07-14T13:45:00Z"
+   }
+ ]
+ ```
```

---

I've made comprehensive updates to both agent files to properly handle inputs and outputs:

## Storyboarding Agent:
1. Added detailed "Input Processing" section explaining:
   - Visual Narrative structure
   - Critical elements to extract (visual description, framing, project style, etc.)
   - How to handle dynamic content (ignoring motion directives, converting motion concepts)

2. Added concrete output examples:
   - Example 1: Infographic Ripple Effect (with all three concept types)
   - Example 2: Breaking Chains (with multiple concept examples)

## Image Refinement Agent:
1. Added detailed "Input Processing" section explaining:
   - Image Metadata structure
   - Variation Keys input with comprehensive list of base and extended variation types

2. Added specific output examples:
   - Example 1: Applying "lighting" variation to standard concept
   - Example 2: Applying multiple variations ("perspective+color") to enhanced concept
   - Example 3: Applying "mood" variation to experimental concept

These updates ensure both agents can properly:
1. Understand and parse their input documents
2. Process and interpret variation keys
3. Generate properly formatted output documents
4. Follow the exact MidJourney prompt structure
5. Apply variations consistently and appropriately

Both agents now have complete instructions without requiring any reference to external documents like MidJourneyPromptEngineering.md. Everything needed is self-contained in each agent's instructions.

---

_**User**_

I provided an example of the input for the storyboarding agent, which is the same and the old Midjourney prompting agent. It is in your context. Better to use representative JSON for the input instructions and examples.

---

_**Assistant**_

You're right. Let me update the ImageRefinement.md file to incorporate the actual JSON structure from the input example you provided.

---



---



---



---

