<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Production Workflow Requirements Document v2.1</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            padding: 20px;
            color: #333;
        }

        h1 {
            color: #2c3e50;
        }

        h2 {
            color: #2980b9;
        }

        h3 {
            color: #3498db;
        }

        h4 {
            color: #16a085;
        }

        strong {
            color: #2c3e50;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 15px;
        }

        code {
            font-family: monospace;
            background-color: #f8f8f8;
            padding: 2px 4px;
            border-radius: 3px;
        }

        ul,
        ol {
            padding-left: 20px;
        }

        .mermaid {
            background-color: #f0f7ff;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border: 1px solid #000;
        }

        .chatgpt {
            background-color: #c9e4de;
        }

        .integration {
            background-color: #bde0fe;
        }

        .human {
            background-color: #ffcfd2;
        }

        .document {
            background-color: #f1f1f1;
        }
        
        .note {
            background-color: #fff8dc;
            border-left: 4px solid #ffd700;
            padding: 10px 15px;
            margin: 15px 0;
            border-radius: 0 4px 4px 0;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>

<body> <!-- START OF METADATA SECTION -->
    <h1>Video Production Workflow Requirements Document v2.1</h1>
    <h2>Document Metadata</h2>
    <ul>
        <li><strong>Name:</strong> Video Production Workflow</li>
        <li><strong>Version:</strong> 2.1</li>
        <li><strong>Timestamp:</strong> 2024-06-30T10:00:00+00:00</li>
            high-quality video content. This version removes redundancies, standardizes naming conventions,
            removes duplicate n8n capability descriptions, improves document structure, and resolves technical ambiguities.</li>
    </ul>

    <h3>Workflow Persona</h3>
        high-quality outputs across various platforms, with particular expertise in AI-assisted content creation and

    <h2>1. Overview & Context</h2>

    <h3>1.1 Project Purpose</h3>

    <h3>1.2 Current Technology Stack</h3>
    <ul>
        <li><strong>AI Agents:</strong> ChatGPT</li>
        <li><strong>Database:</strong> Airtable</li>
        <li><strong>Image Generation:</strong> MidJourney</li>
        <li><strong>Sound Effects:</strong> ElevenLabs</li>
        <li><strong>Video Generation:</strong> Kling</li>
        <li><strong>Editing and Special Effects:</strong> Premiere Pro, After Effects</li>
    </ul>
    
    <div class="note">
    </div>

    <h2>2. Core Requirements</h2>

    <h3>2.1 Key Priorities</h3>
    <ul>
        <li>Balanced optimization for speed, cost-efficiency, and creative flexibility</li>
        <li>Human oversight at critical junctures (after image generation and during final edits)</li>
    </ul>

    <ul>
        <li>Labor-intensive editing process in Premiere Pro</li>
    </ul>

    <h3>2.3 Workflow Structure Requirements</h3>
    <ul>
        <li>Inclusion of duration estimates at both scene and shot levels</li>
        <li>Maintenance of all three tiers of B-Roll concepts (standard, enhanced, experimental) for creative flexibility</li>
    </ul>


    <h3 id="node-types">3.1 Node Types</h3>
    <ul>
        <li><strong>AI Agent:</strong> A node powered by an AI language model (typically ChatGPT) that performs creative
            or analytical tasks based on its assigned persona.</li>
    </ul>

    <ul>
        <li><strong>B-Roll Production:</strong> The creation of supplementary visual content from ideation through image
            generation and animation.</li>
            quality standards.</li>
    </ul>

    <h3 id="agent-personas">3.3 Agent Personas</h3>
    <table>
        <tr>
            <th>Node</th>
            <th>Agent Persona</th>
            <th>Persona Description</th>
        </tr>
        <tr>
            <td>Scene Segmentation</td>
                boundaries and enhances segments with production metadata.</td>
        </tr>
        <tr>
            <td>Shot Segmentation</td>
        </tr>
        <tr>
            <td>B-Roll Ideation</td>
            <td>Develops creative concepts across tiers of engagement (standard, enhanced, experimental). Uses lateral
        </tr>
        <tr>
            <td>Visual Narrative Design</td>
        </tr>
        <tr>
            <td>MidJourney Prompt Engineering</td>
                mood cues, and subject clarity for reliable image generation.</td>
        </tr>
        <tr>
            <td>Kling Prompt Engineering</td>
                momentum, realism, and visual coherence in animation specifications.</td>
        </tr>
        <tr>
            <td>Music Selection</td>
        </tr>
        <tr>
            <td>Sound Effects Generation</td>
            <td>Sound Designer</td>
                detail for actions, transitions, and environmental cues that heighten engagement.</td>
        </tr>
        <tr>
            <td>Human Review Nodes</td>
        </tr>
    </table>
    
    

    <h4 id="scene-segmentation-node">4.1.1 Scene Segmentation</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Input:</strong> <a href="#video-script">Video Script</a><br>
        <strong>Output:</strong> <a href="#scene-blueprint">Scene Blueprint</a><br>
        downstream.
    </p>

    <h4 id="shot-segmentation-node">4.1.2 Shot Segmentation</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Input:</strong> <a href="#scene-blueprint">Scene Blueprint</a><br>
        <strong>Output:</strong> <a href="#shot-plan">Shot Plan</a><br>
    </p>

    <h4 id="broll-ideation-node">4.1.3 B-Roll Ideation</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Input:</strong> <a href="#shot-plan">Shot Plan</a><br>
        <strong>Output:</strong> <a href="#broll-concepts">B-Roll Concepts</a><br>
        <strong>Description:</strong> Takes B-roll classified shots and proposes three tiers of visual concepts:
        visually surprising ideas. Each tier provides progressively more innovative visual solutions while
        maintaining narrative coherence.
    </p>

    <h4 id="visual-narrative-design-node">4.1.4 Visual Narrative Design</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Input:</strong> <a href="#broll-concepts">B-Roll Concepts</a><br>
        <strong>Output:</strong> <a href="#visual-narrative">Visual Narrative</a><br>
        narrative through visual design annotations. Creates a comprehensive visual narrative guide that defines shot
    </p>

    <h4 id="character-reference-node">4.1.5 Character Reference Selection</h4>
        <strong>Input:</strong> <a href="#scene-blueprint">Scene Blueprint</a><br>
        <strong>Output:</strong> <a href="#character-references">Character References</a><br>
        <strong>Configuration:</strong>
    <ul>
        <li>Review Method: Visual Interface</li>
        <li>Timeout Hours: 24</li>
        <li>Required Fields: character_id, character_name, reference_image_file, character_description</li>
    </ul>
    </p>

    <h4 id="midjourney-prompt-engineering-node">4.1.6 MidJourney Prompt Engineering</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Input:</strong> <a href="#visual-narrative">Visual Narrative</a><br>
        <strong>Referenced Data:</strong> <a href="#character-references">Character References</a> (optional)<br>
        <strong>Output:</strong> <a href="#image-prompts">Image Prompts</a><br>
        optimized for MidJourney. Encodes scene styles, framing, mood cues, and subject clarityâ€”balancing visual
    </p>

    <h4 id="image-generation-node">4.1.7 Image Generation</h4>
    <p><strong>Node Type:</strong> Integration<br>
        <strong>Service:</strong> MidJourney<br>
        <strong>Input:</strong> <a href="#image-prompts">Image Prompts</a><br>
        <strong>Output:</strong> <a href="#generated-images">Generated Images</a><br>
        <strong>Description:</strong> Generates images for B-Roll using MidJourney based on engineered prompts,
        generated content while maintaining character continuity.
    </p>

    <h4 id="image-review-node">4.1.8 Image Review</h4>
        <strong>Input:</strong> <a href="#generated-images">Generated Images</a><br>
        <strong>Output:</strong> <a href="#approved-images">Approved Images</a><br>
        <strong>Configuration:</strong>
    <ul>
        <li>Review Method: Visual Gallery Interface</li>
        <li>Timeout Hours: 48</li>
        <li>Required Fields: status, feedback</li>
        <li>Options: Approve, Reject with Feedback, Request Alternatives</li>
    </ul>
    </p>

    <h4 id="kling-prompt-engineering-node">4.1.9 Kling Prompt Engineering</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Input:</strong> <a href="#approved-images">Approved Images</a><br>
        <strong>Referenced Data:</strong> <a href="#visual-narrative">Visual Narrative</a><br>
        <strong>Output:</strong> <a href="#animation-prompts">Animation Prompts</a><br>
        <strong>Description:</strong> Creates animation prompts and movement parameters optimized for Kling video
    </p>

    <p><strong>Node Type:</strong> Integration<br>
        <strong>Service:</strong> Kling<br>
        <strong>Input:</strong> <a href="#animation-prompts">Animation Prompts</a><br>
        <strong>Referenced Data:</strong> <a href="#approved-images">Approved Images</a><br>
        <strong>Output:</strong> <a href="#animated-clips">Animated Clips</a><br>
    </p>

    <h4 id="audio-generation-node">4.1.11 Audio Generation</h4>
    <p><strong>Node Type:</strong> Integration<br>
        <strong>Service:</strong> ElevenLabs<br>
        <strong>Input:</strong> <a href="#scene-blueprint">Scene Blueprint</a><br>
        <strong>Referenced Data:</strong> <a href="#shot-plan">Shot Plan</a><br>
        <strong>Output:</strong> <a href="#narration-audio">Narration Audio</a><br>
    </p>

    <h4 id="music-selection-node">4.1.12 Music Selection</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Input:</strong> <a href="#scene-blueprint">Scene Blueprint</a><br>
        <strong>Output:</strong> <a href="#music-plan">Music Plan</a><br>
        enhances mood and transitions. Matches tracks based on emotional signature and narrative energy, ensuring genre,
    </p>

    <h4 id="sfx-generation-node">4.1.13 Sound Effects Generation</h4>
    <p><strong>Node Type:</strong> AI Agent<br>
        <strong>Agent Persona:</strong> Sound Designer<br>
        <strong>Input:</strong> <a href="#shot-plan">Shot Plan</a><br>
        <strong>Referenced Data:</strong> <a href="#visual-narrative">Visual Narrative</a><br>
        <strong>Output:</strong> <a href="#sfx-plan">SFX Plan</a><br>
    </p>

    <h4 id="audio-mixing-node">4.1.14 Audio Mixing</h4>
    <p><strong>Node Type:</strong> Integration<br>
        <strong>Service:</strong> ElevenLabs-AudioMixer<br>
        <strong>Input:</strong> <a href="#narration-audio">Narration Audio</a>, <a
            href="#music-plan">Music Plan</a>, <a href="#sfx-plan">SFX Plan</a><br>
        <strong>Output:</strong> <a href="#final-audio">Final Audio</a><br>
        <strong>Description:</strong> Combines narration, background music, and sound effects with appropriate levels
    </p>

    <h4 id="timeline-assembly-node">4.1.15 Timeline Assembly</h4>
    <p><strong>Node Type:</strong> Integration<br>
        <strong>Service:</strong> n8n-Assembler<br>
        <strong>Input:</strong> <a href="#animated-clips">Animated Clips</a>, <a href="#narration-audio">Narration Audio</a>, <a href="#final-audio">Final Audio</a><br>
        <strong>Output:</strong> <a href="#edit-assembly">Edit Assembly</a><br>
        <strong>Description:</strong> Assembles a structured timeline for video editing, linking A-Roll narration with
        <div class="note">
        </div>
    </p>

    <h4 id="final-editing-node">4.1.16 Final Editing & Assembly</h4>
        <strong>Input:</strong> <a href="#edit-assembly">Edit Assembly</a><br>
        <strong>Output:</strong> Final Video (MP4, 16:9)<br>
        vision.<br>
        <strong>Configuration:</strong>
    <ul>
        <li>Review Cycle: Single Review</li>
        <li>Quality Standards: Professional Broadcast Quality</li>
        <li>Output Formats: MP4, 16:9 aspect ratio</li>
    </ul>
    </p>

    <h2 id="document-specs">5. Document Specifications</h2>
    
    <h3 id="document-definitions">5.1 Document Definitions</h3>
    
    <h4 id="video-script">5.1.1 Video Script</h4>
    <p><strong>Format:</strong> Markdown (Single Document)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> Markdown<br>
        production.<br>
        <strong>Used By:</strong> <a href="#scene-segmentation-node">Scene Segmentation</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>title</td>
            <td>string</td>
        </tr>
        <tr>
            <td>introduction</td>
            <td>string</td>
        </tr>
        <tr>
            <td>script_body</td>
            <td>string</td>
            <td>Main narration text with speaker notes</td>
        </tr>
        <tr>
            <td>visual_suggestions</td>
            <td>string</td>
        </tr>
        <tr>
            <td>string</td>
            <td>Overall mood and presentation style guidance</td>
        </tr>
        <tr>
            <td>string</td>
            <td>General music style and sound effects suggestions</td>
        </tr>
        <tr>
            <td>target_audience</td>
            <td>string</td>
        </tr>
        <tr>
            <td>messaging_goals</td>
            <td>string</td>
        </tr>
    </table>

    <h4 id="scene-blueprint">5.1.2 Scene Blueprint</h4>
    <p><strong>Format:</strong> JSON (Array)<br />
        <strong>Type:</strong> Structured Data<br />
        <strong>Subtype:</strong> JSON<br />
        <strong>Generated By:</strong> <a href="#scene-segmentation-node">Scene Segmentation</a><br>
        <strong>Used By:</strong> <a href="#shot-segmentation-node">Shot Segmentation</a>, <a href="#character-reference-node">Character Reference Selection</a>, <a href="#audio-generation-node">Audio Generation</a>, <a href="#music-selection-node">Music Selection</a>
    </p>
    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>scene_narration</td>
            <td>string</td>
            <td>Narration text for this scene</td>
        </tr>
        <tr>
            <td>scene_description</td>
            <td>string</td>
            <td>Description of what happens in this scene</td>
        </tr>
        <tr>
            <td>suggested_visuals</td>
            <td>string</td>
            <td>Suggestions for visual content in this scene</td>
        </tr>
        <tr>
            <td>suggested_audio</td>
            <td>object</td>
            <td>Object containing background_music and sound_effects suggestions</td>
        </tr>
        <tr>
            <td>expected_duration</td>
        </tr>
        <tr>
            <td>production_notes</td>
            <td>string</td>
                contextual nuance</td>
        </tr>
    </table>

    <h4 id="shot-plan">5.1.3 Shot Plan</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Generated By:</strong> <a href="#shot-segmentation-node">Shot Segmentation</a><br>
        <strong>Used By:</strong> <a href="#broll-ideation-node">B-Roll Ideation</a>, <a href="#audio-generation-node">Audio Generation</a>, <a href="#sfx-generation-node">Sound Effects Generation</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_description</td>
            <td>string</td>
            <td>Description of what happens in this shot</td>
        </tr>
        <tr>
            <td>roll_type</td>
            <td>string</td>
            <td>Classification as "A" (narration-driven) or "B" (supplementary visuals)</td>
        </tr>
        <tr>
            <td>expected_duration</td>
        </tr>
        <tr>
            <td>suggested_broll_visuals</td>
            <td>string</td>
            <td>Visual suggestions for B-Roll shots</td>
        </tr>
        <tr>
            <td>suggested_sound_effects</td>
            <td>array</td>
            <td>Array of sound effect suggestions</td>
        </tr>
        <tr>
            <td>string</td>
        </tr>
    </table>

    <h4 id="broll-concepts">5.1.4 B-Roll Concepts</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Creative concepts for B-Roll shots at three distinct creativity tiers.<br>
        <strong>Generated By:</strong> <a href="#broll-ideation-node">B-Roll Ideation</a><br>
        <strong>Used By:</strong> <a href="#visual-narrative-design-node">Visual Narrative Design</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>standard_broll</td>
            <td>object</td>
            <td>Conventional concept with idea, visual_style, and motion properties</td>
        </tr>
        <tr>
            <td>enhanced_broll</td>
            <td>object</td>
            <td>More creative concept with idea, visual_style, and motion properties</td>
        </tr>
        <tr>
            <td>experimental_broll</td>
            <td>object</td>
            <td>Highly innovative concept with idea, visual_style, and motion properties</td>
        </tr>
    </table>
    
    <h4 id="visual-narrative">5.1.5 Visual Narrative</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Generated By:</strong> <a href="#visual-narrative-design-node">Visual Narrative Design</a><br>
        <strong>Used By:</strong> <a href="#midjourney-prompt-engineering-node">MidJourney Prompt Engineering</a>, <a href="#kling-prompt-engineering-node">Kling Prompt Engineering</a>, <a href="#sfx-generation-node">Sound Effects Generation</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>project_visual_style</td>
            <td>object</td>
        </tr>
        <tr>
            <td>shots_sequence</td>
            <td>array</td>
            <td>Ordered array of shot objects with detailed specifications</td>
        </tr>
        <tr>
            <td>shot_transitions</td>
            <td>array</td>
        </tr>
        <tr>
            <td>visual_motifs</td>
            <td>array</td>
        </tr>
        <tr>
            <td>emotional_progression</td>
            <td>array</td>
        </tr>
        <tr>
            <td>technical_requirements</td>
            <td>object</td>
            <td>Technical specifications for visual consistency</td>
        </tr>
        <tr>
            <td>style_reference_links</td>
            <td>array</td>
        </tr>
    </table>

    <h4 id="character-references">5.1.6 Character References</h4>
    <p><strong>Format:</strong> JSON (Array with File References)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Reference images for consistent character representation.<br>
        <strong>Generated By:</strong> <a href="#character-reference-node">Character Reference Selection</a><br>
        <strong>Used By:</strong> <a href="#midjourney-prompt-engineering-node">MidJourney Prompt Engineering</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>character_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>character_name</td>
            <td>string</td>
        </tr>
        <tr>
            <td>reference_image_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>character_description</td>
            <td>string</td>
        </tr>
    </table>
    
    <h4 id="image-prompts">5.1.7 Image Prompts</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Optimized prompts for generating images with MidJourney.<br>
        <strong>Generated By:</strong> <a href="#midjourney-prompt-engineering-node">MidJourney Prompt Engineering</a><br>
        <strong>Used By:</strong> <a href="#image-generation-node">Image Generation</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>concept_type</td>
            <td>string</td>
            <td>Classification as "standard", "enhanced", or "experimental"</td>
        </tr>
        <tr>
            <td>midjourney_prompt</td>
            <td>string</td>
            <td>Complete prompt text for MidJourney image generation</td>
        </tr>
        <tr>
            <td>character_references</td>
            <td>array</td>
            <td>Optional array of character reference image identifiers</td>
        </tr>
    </table>

    <h4 id="generated-images">5.1.8 Generated Images</h4>
    <p><strong>Format:</strong> JSON (Array with File References)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Generated images for B-Roll content.<br>
        <strong>Generated By:</strong> <a href="#image-generation-node">Image Generation</a><br>
        <strong>Used By:</strong> <a href="#image-review-node">Image Review</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>image_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>concept_type</td>
            <td>string</td>
            <td>Classification as "standard", "enhanced", or "experimental"</td>
        </tr>
        <tr>
            <td>status</td>
            <td>string</td>
        </tr>
    </table>

    <h4 id="approved-images">5.1.9 Approved Images</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Human-reviewed and approved images for B-Roll content.<br>
        <strong>Generated By:</strong> <a href="#image-review-node">Image Review</a><br>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>image_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>concept_type</td>
            <td>string</td>
            <td>Classification as "standard", "enhanced", or "experimental"</td>
        </tr>
        <tr>
            <td>status</td>
            <td>string</td>
            <td>Status after review (approved, rejected)</td>
        </tr>
        <tr>
            <td>feedback</td>
            <td>string</td>
            <td>Human reviewer feedback or comments</td>
        </tr>
    </table>

    <h4 id="animation-prompts">5.1.10 Animation Prompts</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Optimized prompts for generating motion from static images.<br>
        <strong>Generated By:</strong> <a href="#kling-prompt-engineering-node">Kling Prompt Engineering</a><br>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>image_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>kling_motion_prompt</td>
            <td>string</td>
            <td>Complete prompt text for Kling motion generation</td>
        </tr>
        <tr>
            <td>animation_style</td>
            <td>string</td>
        </tr>
        <tr>
            <td>camera_movement</td>
            <td>string</td>
            <td>Description of desired camera movement</td>
        </tr>
        <tr>
            <td>duration</td>
        </tr>
    </table>
    <h4 id="animated-clips">5.1.11 Animated Clips</h4>
    <p><strong>Format:</strong> JSON (Array with File References)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Generated video clips from static images.<br>
        <strong>Used By:</strong> <a href="#timeline-assembly-node">Timeline Assembly</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>video_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>source_image_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>duration</td>
        </tr>
    </table>

    <h4 id="narration-audio">5.1.12 Narration Audio</h4>
    <p><strong>Format:</strong> JSON (Array with File References)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Generated By:</strong> <a href="#audio-generation-node">Audio Generation</a><br>
        <strong>Used By:</strong> <a href="#audio-mixing-node">Audio Mixing</a>, <a href="#timeline-assembly-node">Timeline Assembly</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>audio_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>transcript</td>
            <td>string</td>
        </tr>
        <tr>
            <td>duration</td>
        </tr>
        <tr>
            <td>timing_markers</td>
            <td>array</td>
            <td>Array of timing markers with timestamp and transcript segment information for synchronization</td>
        </tr>
    </table>

    <h4 id="music-plan">5.1.13 Music Plan</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Specifications for background music selection and placement.<br>
        <strong>Generated By:</strong> <a href="#music-selection-node">Music Selection</a><br>
        <strong>Used By:</strong> <a href="#audio-mixing-node">Audio Mixing</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>segment_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>scene_ids</td>
            <td>array</td>
        </tr>
        <tr>
            <td>music_style</td>
            <td>string</td>
        </tr>
        <tr>
            <td>string</td>
        </tr>
        <tr>
            <td>tempo</td>
            <td>string</td>
            <td>Tempo description or BPM range</td>
        </tr>
        <tr>
            <td>intensity_progression</td>
            <td>object</td>
            <td>Object with start_level and end_level properties</td>
        </tr>
        <tr>
            <td>suggested_tracks</td>
            <td>array</td>
            <td>Array of recommended music tracks</td>
        </tr>
        <tr>
            <td>duration</td>
        </tr>
        <tr>
            <td>transition_in</td>
            <td>string</td>
        </tr>
        <tr>
            <td>transition_out</td>
            <td>string</td>
        </tr>
    </table>
    <h4 id="sfx-plan">5.1.14 SFX Plan</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Specifications for sound effects selection and placement.<br>
        <strong>Generated By:</strong> <a href="#sfx-generation-node">Sound Effects Generation</a><br>
        <strong>Used By:</strong> <a href="#audio-mixing-node">Audio Mixing</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>effect_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>scene_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>shot_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>effect_type</td>
            <td>string</td>
            <td>Classification as "ambient", "spot", or "transition"</td>
        </tr>
        <tr>
            <td>effect_description</td>
            <td>string</td>
        </tr>
        <tr>
            <td>timing</td>
            <td>string</td>
        </tr>
        <tr>
            <td>duration</td>
        </tr>
        <tr>
            <td>intensity</td>
            <td>string</td>
        </tr>
        <tr>
            <td>suggested_source</td>
            <td>string</td>
        </tr>
    </table>

    <h4 id="final-audio">5.1.15 Final Audio</h4>
    <p><strong>Format:</strong> JSON (Array with File References)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Combined audio tracks with narration, music, and effects.<br>
        <strong>Generated By:</strong> <a href="#audio-mixing-node">Audio Mixing</a><br>
        <strong>Used By:</strong> <a href="#timeline-assembly-node">Timeline Assembly</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>track_id</td>
            <td>string</td>
        </tr>
        <tr>
            <td>scene_ids</td>
            <td>array</td>
            <td>Array of scene IDs covered by this track</td>
        </tr>
        <tr>
            <td>audio_file</td>
            <td>string</td>
        </tr>
        <tr>
            <td>duration</td>
        </tr>
        <tr>
            <td>track_components</td>
            <td>array</td>
            <td>Array of contained elements (narration, music, effects)</td>
        </tr>
        <tr>
            <td>levels</td>
            <td>object</td>
            <td>Object with level settings for each component</td>
        </tr>
    </table>

    <h4 id="edit-assembly">5.1.16 Edit Assembly</h4>
    <p><strong>Format:</strong> JSON (Array)<br>
        <strong>Type:</strong> Structured Data<br>
        <strong>Subtype:</strong> JSON<br>
        <strong>Description:</strong> Structured timeline for video editing with tracks and clip placements.<br>
        <strong>Generated By:</strong> <a href="#timeline-assembly-node">Timeline Assembly</a><br>
        <strong>Used By:</strong> <a href="#final-editing-node">Final Editing & Assembly</a>
    </p>

    <table>
        <tr>
            <th>Field</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>video_tracks</td>
            <td>array</td>
            <td>Array of video track objects</td>
        </tr>
        <tr>
            <td>audio_tracks</td>
            <td>array</td>
            <td>Array of audio track objects</td>
        </tr>
        <tr>
            <td>clips</td>
            <td>array</td>
            <td>Array of clip objects with scene_id and shot_id references</td>
        </tr>
        <tr>
            <td>transitions</td>
            <td>array</td>
        </tr>
        <tr>
            <td>markers</td>
            <td>array</td>
        </tr>
    </table>

    <h2>6. Workflow Process Requirements</h2>

    <h3>6.1 Data Flow in n8n</h3>
    <ul>
        <li>Standardized JSON formats for all metadata documents enable seamless integration</li>
        <li>Separate data flows for MidJourney and Kling prompt generation maintain clear responsibility boundaries</li>
        <li>Version control for assets requiring multiple iterations is maintained through status fields</li>
    </ul>
    
    <div class="note">
    </div>

    <h3>6.2 Deferred Requirements</h3>
    <ul>
        <li>Additional error recovery processes for failed image or audio generation</li>
    </ul>

    <h3>6.3 Error Handling</h3>
    <ul>
        <li>Validation at each handover point with schema validation for all JSON documents</li>
        <li>Notification system for missing assets or incomplete data using n8n email or messaging integrations</li>
        <li>Fallback options for failed image generation, including:
            <ul>
                <li>Human intervention via notification</li>
            </ul>
        </li>
        <li>Fallback options for failed audio production, including:
            <ul>
                <li>Human intervention for manual audio generation</li>
                <li>Use of alternative voice models or audio sources</li>
            </ul>
        </li>
        <li>Error logs with detailed context for troubleshooting</li>
    </ul>

    <h3>6.4 Human Review Points</h3>
    <ul>
    </ul>
    
    <h3>6.5 Workflow Review Paths</h3>
    <ul>
    </ul>

    <h2>7. Quality Assurance Requirements</h2>

    <h3>7.1 Visual Content Quality</h3>
    <ul>
        <li>Style consistency across all generated images through project_visual_style parameters</li>
        <li>Technical specifications (16:9 aspect ratio) explicitly included in all prompts</li>
        <li>Character consistency maintained through Character Reference injection</li>
        <li>Enhanced motion quality achieved through separation of image review and Kling prompt engineering</li>
        <li>Cohesive visual narrative across shots as defined in Visual Narrative document</li>
        <li>Visual motifs and style references carried throughout all B-Roll content</li>
    </ul>

    <h3>7.2 Audio Quality</h3>
    <ul>
        <li>Clear voiceover narration matching script segments from Scene Blueprint</li>
        <li>Thematically relevant sound effects enhancing visual content</li>
        <li>Consistent audio levels across narration segments</li>
        <li>Timing markers in Narration Audio enabling precise synchronization with visuals</li>
    </ul>

    <h3>7.3 Final Video Quality</h3>
    <ul>
        <li>Professional-grade visual and audio production meeting broadcast standards</li>
        <li>Emotional impact consistent with narrative goals and emotional_progression</li>
        <li>Technical quality meeting 16:9 aspect ratio and output specifications</li>
        <li>Seamless integration of A-Roll narration and B-Roll visuals</li>
    </ul>

    <h3>7.4 Workflow Efficiency</h3>
    <ul>
        <li>Parallel processing of A-Roll, B-Roll, and Audio production phases where possible</li>
        <li>Strategic human review points that add value without creating bottlenecks</li>
        <li>Explicit fallback paths for handling rejected assets</li>
        <li>Efficient synchronization of audio and visual elements at Timeline Assembly</li>
    </ul>

    <h2>8. Workflow Flow Chart</h2>

    <h3>Color Code Legend</h3>
    <div class="legend">
        <div class="legend-item">
            <div class="legend-color chatgpt" style="background-color: #c9e4de;"></div>
            <div>AI Agent Nodes</div>
        </div>
        <div class="legend-item">
            <div class="legend-color integration" style="background-color: #bde0fe;"></div>
            <div>Integration Nodes</div>
        </div>
        <div class="legend-item">
            <div class="legend-color human" style="background-color: #ffcfd2;"></div>
        </div>
        <div class="legend-item">
            <div class="legend-color document" style="background-color: #f1f1f1;"></div>
            <div>Documents/Data</div>
        </div>
    </div>
    
    <div class="mermaid">
        flowchart TD
        A>"Video Script"]:::document ---> B
        B[Scene Segmentation]:::aiAgent ---> C
        C>"Scene Blueprint"]:::document ---> D
        C ---> Z
        C ---> P
        C ---> BM
        D[Shot Segmentation]:::aiAgent ---> E
        E>"Shot Plan"]:::document ---> F
        E ---> P
        E ---> SE

        subgraph "B-Roll Production"
        F[B-Roll Ideation]:::aiAgent ---> G
        G>"B-Roll Concepts"]:::document ---> H1
        H1[Visual Narrative Design]:::aiAgent ---> G1
        G1>"Visual Narrative"]:::document ---> H
        G1 -.-> SE

        %% Character reference image selection happens early
        Z[Character Reference Selection]:::humanInLoop ---> Z1
        Z1>"Character References"]:::document -.-> H

        H[MidJourney Prompt Engineering]:::aiAgent ---> I
        I>"Image Prompts"]:::document ---> J
        J[Image Generation]:::integration ---> K
        K>"Generated Images"]:::document ---> L
        L[Image Review]:::humanInLoop ---> M
        M>"Approved Images"]:::document ---> H2

        %% Kling prompt engineering references both inputs
        H2[Kling Prompt Engineering]:::aiAgent -.-> G1
        H2 ---> I2
        I2>"Animation Prompts"]:::document ---> N
        N ---> O
        O>"Animated Clips"]:::document ---> R
        end

        subgraph "A-Roll Production"
        P[Audio Generation]:::integration ---> Q
        Q>"Narration Audio"]:::document ---> R
        Q ---> AM
        end

        subgraph "Audio Production"
        BM[Music Selection]:::aiAgent ---> BMO
        BMO>"Music Plan"]:::document ---> AM

        SE[Sound Effects Generation]:::aiAgent -.-> E
        SE ---> SEO
        SEO>"SFX Plan"]:::document ---> AM

        AM[Audio Mixing]:::integration ---> AMO
        AMO>"Final Audio"]:::document ---> R
        end

        subgraph "Post-Production"
        R[Timeline Assembly]:::integration ---> S
        S>"Edit Assembly"]:::document ---> T
        T[Final Editing & Assembly]:::humanInLoop ---> U
        U>"Final Video"]:::document
        end

        %% Review paths
        L -- "Rejected" --> H
        L -- "Approved" --> M
        
        classDef reference stroke-dasharray: 5 5


        %% Class definitions
        classDef aiAgent fill:#c9e4de,stroke:#000,stroke-width:1px
        classDef integration fill:#bde0fe,stroke:#000,stroke-width:1px
        classDef humanInLoop fill:#ffcfd2,stroke:#000,stroke-width:1px
        classDef document fill:#f1f1f1,stroke:#000,stroke-width:1px
    </div>

    <h2>9. Implementation Guidelines for n8n</h2>
    
    <h3>9.1 Key Implementation Principles</h3>
    <ul>
        <li><strong>Track Status and Versions:</strong> Maintain version tracking for assets that go through revisions.</li>
        <li><strong>Log All Operations:</strong> Implement comprehensive logging for troubleshooting and quality control.</li>
        <li><strong>Enable Notifications:</strong> Add notification mechanisms for human review points and error conditions.</li>
    </ul>
    
    <h3>9.2 Integration with External Systems</h3>
    <ul>
        <li><strong>MidJourney:</strong> For B-Roll image generation</li>
        <li><strong>ElevenLabs:</strong> For narration audio and sound effects</li>
        <li><strong>Premiere Pro:</strong> For final editing and assembly (integration details deferred)</li>
    </ul>
    
    <div class="note">
    </div>
</body>

</html>
